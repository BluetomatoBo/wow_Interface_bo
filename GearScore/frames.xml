<Ui xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.blizzard.com/wow/ui/">
	<!--@no-lib-strip@-->
	<Script file="Libs\LibStub\LibStub.lua"/>
	<Include file="Libs\AceAddon-3.0\AceAddon-3.0.xml"/>
	<Include file="Libs\AceLocale-3.0\AceLocale-3.0.xml"/>
	<Include file="Libs\LibCompress\lib.xml"/>
	<!--@end-no-lib-strip@-->

	<!-- Import Languages Here -->
	<Include file="locales\enUS.lua"/>
	<Include file="locales\ruRU.lua"/>
	<Include file="locales\zhCN.lua"/>
	<Include file="locales\zhTW.lua"/>
	<!-- End Language Import -->
	
	<Frame name="TenTonHammer_StatsFrame" inherits="StatGroupTemplate" parent="CharacterStatsPaneScrollChild">
		<Size x="169" y="350"/>
		<Scripts>
			<OnLoad>
				<![CDATA[
				-- PlayerScore Stat Injection Script -- 
				-- Copyright 2010, TenTonHammer --
				
				-- Set Pane ID to 1 higher then total number of Panes
				local id = #PAPERDOLL_STATCATEGORY_DEFAULTORDER + 1;

				-- Create Frame
				local frame = CreateFrame("Frame", "CharacterStatsPaneCategory"..id, CharacterStatsPaneScrollChild, "StatGroupTemplate");

				--Load Localization--
				local AceLocale = LibStub("AceLocale-3.0")
				local L = AceLocale:GetLocale("GearScore4")

				--Creates Category Title--
				STAT_CATEGORY_PLAYERSCORE = L['PlayerScore'];

				--Create PlayerScore Stat Catagory--
				PAPERDOLL_STATCATEGORIES["PLAYERSCORE"] = {
					["id"] = id,
					stats = {
						"TTH_EQUIP",
						"TTH_RAID",
						"TTH_PVE",
						"TTH_PVP",
						"TTH_SUPER",
					}
				}
				-- Inject Our StatBox Into Existing Order --
				tinsert(PAPERDOLL_STATCATEGORY_DEFAULTORDER, 1, "PLAYERSCORE");

				-- Register Update Functions --
				PAPERDOLL_STATINFO ["TTH_SUPER"] = {
					updateFunc = function(statFrame, unit) TenTonHammer_StatsUpdate(statFrame, unit, 'Player Rating',L["This is an aggregate of the various other scores, to give you a quick indication of a player's overall competency. It is weighted to consider the GearScore most heavily. The Crafting Score does not contribute to the Super Score."]); end
				};
				PAPERDOLL_STATINFO ["TTH_EQUIP"] = {
					updateFunc = function(statFrame, unit) TenTonHammer_StatsUpdate(statFrame, unit, 'GearScore', L["GearScore is based on a player's equipment. It considers item level, gems and enchants, and appropriateness to class and spec. Two handed weapons receive bonuses, as do Hunter ranged weapons."]); end
				};
				PAPERDOLL_STATINFO ["TTH_RAID"] = {
					updateFunc = function(statFrame, unit) TenTonHammer_StatsUpdate(statFrame, unit, 'Raid Score', L["Raid score is based on the number of completed raids."]); end
				};
				PAPERDOLL_STATINFO ["TTH_PVE"] = {
					updateFunc = function(statFrame, unit) TenTonHammer_StatsUpdate(statFrame, unit, 'PvP GearScore', L["PvP GearScore is normal GearScore adjusted to compensate for performance quality in PvP Combat."]); end
				};
				PAPERDOLL_STATINFO ["TTH_PVP"] = {
					updateFunc = function(statFrame, unit) TenTonHammer_StatsUpdate(statFrame, unit, 'PvP Score', L["PvP Score is based on arena and battleground participation, win/lose ratios, and PvP kills."]); end
				};
				function TenTonHammer_StatsUpdate(statFrame, unit, stat, description)
					if ( stat == "GearScore" ) then 
						TenTonHammer:GetPlayerInfo();
					end;
					local FakeArray = {
						['GearScore'] = 'GearScore',
						['Raid Score'] = 'RaidScore',
						['PvP GearScore'] = 'PVEScore',
						['PvP Score'] = 'PVPScore',
						['Player Rating'] = 'PVPScore',
					}
					if  ( TenTonHammer.PlayerInfo ) then 
						local data = TenTonHammer.PlayerInfo;
						local statValue = data[FakeArray[stat]];
						local r,g,b,hex = TenTonHammer:GetColor(statValue or 0);
						statValue = hex..(statValue or 0);
						
						if ( stat == 'Player Rating' ) then
							statValue = "|cff00ff00+ "..(data["ThumbsUp"] or 0).." / |cffff0000- "..(data["ThumbsDown"] or 0);
						end;
						
						PaperDollFrame_SetLabelAndText(statFrame, L[stat], statValue, false);
						--statFrame.tooltip = HIGHLIGHT_FONT_COLOR_CODE..format(PAPERDOLLFRAME_TOOLTIP_FORMAT, L[stat]..':').." "..statValue..FONT_COLOR_CODE_CLOSE;
						statFrame.tooltip = format(PAPERDOLLFRAME_TOOLTIP_FORMAT, L[stat]..':').." "..statValue;
						statFrame.tooltip2 = description;
						statFrame:Show();		
					else
						PaperDollFrame_SetLabelAndText(statFrame, L[stat], "|cff0000000", false);
						statFrame.tooltip = HIGHLIGHT_FONT_COLOR_CODE..format(PAPERDOLLFRAME_TOOLTIP_FORMAT, L[stat]..':').." 0"..FONT_COLOR_CODE_CLOSE;
						statFrame.tooltip2 = description;
						statFrame:Show();
						return 0; 			
					end;
				end;
				]]>
			</OnLoad>
		</Scripts>
	</Frame>
	<Button name="TenTonHammer_Tab_Template" inherits="CharacterFrameTabButtonTemplate" virtual="true">
		<Scripts>
			<OnClick>
				PlaySound("igMainMenuOpen");
				local parent = self:GetParent();
				local id = self:GetID();
				if ( id == 7 ) then id = 9; end;
				parent:SwitchTabs(id);
			</OnClick>
			<OnLoad>
				--Load Localization--
				local AceLocale = LibStub("AceLocale-3.0");
				local L = AceLocale:GetLocale("GearScore4");
				self:SetText(L[self:GetText()]);

				-- Automatically Positions This Element relative to other Tabs and registers all tabs.
				local parent = self:GetParent();
				local currentID = self:GetID();
				PanelTemplates_SetNumTabs(parent, currentID);
				PanelTemplates_SetTab(parent, 1);

				if ( currentID > 1 ) then
				local parentName = parent:GetName();
				local previousID = self:GetID() - 1;
				local previousButton = _G[parentName..'Tab'..previousID];
				self:SetPoint("TOPLEFT", previousButton, "TOPRIGHT", -15, 0);
				else
				self:SetPoint("TOPLEFT", parent, "BOTTOMLEFT", 0, 8);
				end;
			</OnLoad>
		</Scripts>
	</Button>
	<Button name="TenTonHammer_RightTab_Template" inherits="TenTonHammer_Tab_Template" virtual="true">
		<Scripts>
			<OnLoad>
				--Load Localization--
				local AceLocale = LibStub("AceLocale-3.0");
				local L = AceLocale:GetLocale("GearScore4");
				self:SetText("|cffFFFFFF" .. L[self:GetText()]);

				-- Automatically Positions This Element relative to other Tabs and registers all tabs.
				local parent = self:GetParent();
				local currentID = self:GetID();
				PanelTemplates_SetNumTabs(parent, currentID);
				PanelTemplates_SetTab(parent, 1);

				local parentName = parent:GetName();
				local previousID = self:GetID() - 1;
				local previousButton = _G[parentName..'Tab'..previousID];
				self:SetPoint("TOPRIGHT", previousButton, "TOPLEFT", 15, 0);
			</OnLoad>
		</Scripts>
	</Button>
	<Frame name="TenTonHammer_Frame" virtual ="true" hidden="true">
		<Size>
			<AbsDimension x="640" y="500"/>
		</Size>
		<Anchors>
			<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
				<Offset x="0" y="0"></Offset>
			</Anchor>
		</Anchors>
	</Frame>
	<Button name="TenTonHammer_RotateButton" virtual="true">
		<Size>
			<AbsDimension x="35" y="35"/>
		</Size>
		<Anchors>
			<Anchor point="TOPLEFT" relativePoint="TOPLEFT">
				<Offset x="10" y="-10"></Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnMouseUp>
				self:GetParent().rotation = 0;
			</OnMouseUp>
			<OnMouseDown>
				local parent = self:GetParent();
				parent.rotation = ( self:GetID() - 2 ) * 0.1 ;
			</OnMouseDown>
		</Scripts>
		<NormalTexture file="Interface\Buttons\UI-RotationLeft-Button-Up"/>
		<PushedTexture file="Interface\Buttons\UI-RotationLeft-Button-Down"/>
		<HighlightTexture file="Interface\Buttons\ButtonHilight-Round" alphaMode="ADD"/>
	</Button>
	<Button name="TenTonHammer_EquipSlotTemplate" virtual="true" inherits="ItemButtonTemplate" toplevel="true" enableMouse="true" id="1">
		<Backdrop bgFile="Interface\PaperDoll\UI-PaperDoll-Slot-Head.blp" />
		<Scripts>
			<OnEnter>
				<![CDATA[
					
					if ( self.Hyperlink ) then
						GameTooltip:SetOwner(self, "ANCHOR_Right");
						GameTooltip:SetHyperlink(self.Hyperlink);
						local f = TenTonHammer;
						local L
						if ( f.CurrentTargetInfo ) then
							--Load Localization--
							local AceLocale = LibStub("AceLocale-3.0");
							L = AceLocale:GetLocale("GearScore4");
							
							local ClassColor = RAID_CLASS_COLORS[f.CurrentTargetInfo["Class"]];
							ClassColor = f:GetHexColor(ClassColor["r"], ClassColor["g"], ClassColor["b"]);
							
							local ItemScore, IncorrectItems, ItemColor = f:GetItemScore(self.Hyperlink, f.CurrentTargetInfo["PlayerRole"], f.CurrentTargetInfo["Class"], {});
							local GemCount, Gems, MissingGemCount, MissingGems = f:GetGemInfo(self.Hyperlink);
							local EnchantInfo = f:GetEnchantInfo(self.Hyperlink);
							
							if ( EnchantInfo ) then ItemScore = ItemScore * 1.03; end;
							ItemScore = floor(ItemScore * ( 1 - ( 0.02 * MissingGemCount ) ));
							
							GameTooltip:AddDoubleLine(ItemColor..L["GearScore"]..": "..ItemScore, ClassColor.."( "..f.CurrentTargetInfo["SpecName"].." "..f.CurrentTargetInfo["ClassLocal"].." )" );
						end;
						GameTooltip:AddLine("|cffff0000"..L["Ctrl-Right Click to find an upgrade!"]);
						GameTooltip:Show();
					end;
				]]>
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
			<OnMouseUp>
				<![CDATA[
					if ( IsShiftKeyDown() ) and ( self.Hyperlink ) then
						local ItemName, ItemLink = GetItemInfo(self.Hyperlink); 
						ChatFrame1EditBox:Insert(ItemLink);
					end
					if ( button == "RightButton" ) and ( IsControlKeyDown() ) then
						if ( self.Hyperlink ) then
							local ItemSubStringTable = {};
							local found, _, ItemSubString = string.find(self.Hyperlink , "^|c%x+|H(.+)|h%[.*%]")
							for v in string.gmatch(ItemSubString, "[^:]+") do tinsert(ItemSubStringTable, v); end
							local ItemID = ItemSubStringTable[2];
							local url = "http://www.wowarmory.com/search.xml?searchType=items&pr="..GetRealmName().."&pn="..TenTonHammer.CurrentTarget.."&pi="..ItemID;
							TenTonHammer_PopupFrame:Popup(url);
							--http://www.wowarmory.com/search.xml?searchType=items&pr=Detheroc&pn=Karaxk&pi=37141
						end;
					end;
				]]>
			</OnMouseUp>
			<OnLoad>
				<![CDATA[
					self.Hyperlink = nil;
				]]>
			</OnLoad>
		</Scripts>
	</Button>
	<StatusBar name="TenTonHammer_StatusBarTemplate" virtual = "true" drawLayer="BACKGROUND" minValue="0" maxValue="100" defaultValue="0" hidden="true">
		<Scripts>
			<OnLoad>
				<![CDATA[
				function self:UpdateValue(Title, Value, Percent, Custom)
					local StatusBar = self:GetName();
					_G[StatusBar.."_ValueText"]:SetText(Value);
					_G[StatusBar.."_TitleText"]:SetText(Title);
					_G[StatusBar.."_PercentText"]:SetText(Percent.."%");
					self:SetValue(Percent);
				end;

				self:UpdateValue("GearScore", "9000", 100);
				]]>
			</OnLoad>
			<OnShow>
				local StatusBar = self:GetName();
				_G[self:GetName().."_Border"]:SetWidth(self:GetWidth()+50);
			</OnShow>
		</Scripts>
		<Size>
			<AbsDimension x="240" y="13"/>
		</Size>
		<Anchors>
			<Anchor point="LEFT">
				<Offset>
					<AbsDimension x="-100" y="0"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_PercentText" inherits="GameFontNormal" text="0%">
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="CENTER">
							<Offset x="0" y="0" />
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_TitleText" inherits="GameFontNormal" text="" justifyH="Left">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT">
							<Offset x="5" y="15" />
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_ValueText" inherits="GameFontNormal" text="0" justifyH="Left">
					<Anchors>
						<Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT">
							<Offset x="-5" y="15" />
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="ARTWORK">
				<Texture name="$parent_Border" file="Interface\AchievementFrame\UI-Achievement-ProgressBar-Border">
					<Scripts>
					</Scripts>
					<Size>
						<AbsDimension x="216" y="35"/>
					</Size>
					<Anchors>
						<Anchor point="LEFT">
							<Offset>
								<AbsDimension x="-8" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<BarTexture file="Interface\PaperDollInfoFrame\UI-Character-Skills-Bar"/>
		<BarColor r=".25" g=".25" b=".75"/>
	</StatusBar>
	<Frame name="TenTonHammer_Icon" virtual="true" toplevel="true">
		<Scripts>
			<OnEnter>
				if ( self.Hyperlink ) then
				GameTooltip:SetOwner(self, "ANCHOR_Right");
				GameTooltip:SetHyperlink(self.Hyperlink);
				GameTooltip:Show();
				end;

				if ( self.TextLink ) then
				GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
				GameTooltip:ClearLines();
				GameTooltip:AddLine(self.TextLink, nil, nil, nil, true);
				GameTooltip:Show();
				end;
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
			<OnClick>
				if ( IsShiftKeyDown() ) and ( this.Hyperlink ) then
				local ItemName, ItemLink = GetItemInfo(this.Hyperlink);
				ChatFrameEditBox:Insert(ItemLink);
				end
			</OnClick>
		</Scripts>
		<Size>
			<AbsDimension x="16" y="16"/>
		</Size>
	</Frame>
	<Frame name="TenTonHammer_EnchantIcon" virtual="true" inherits="TenTonHammer_Icon">
		<Scripts>
			<OnClick>
			</OnClick>
			<OnEnter>
				<![CDATA[
				GameTooltip:SetOwner(self, "ANCHOR_Right");
				GameTooltip:ClearLines();
				if ( self.Hyperlink ) then
					GameTooltip:AddLine(self.Hyperlink[1]);
					GameTooltip:AddLine("|cFF909090"..self.Hyperlink[2]);
					GameTooltip:AddLine("|cff1EFF00"..self.Hyperlink[3]);
				end;
				GameTooltip:Show();
				]]>
			</OnEnter>
		</Scripts>
	</Frame>
	<Frame name="TenTonHammer_DatabaseHead" virtual="true">
		<Size>
			<AbsDimension x="50" y="13"/>
		</Size>
		<Scripts>
			<OnEnter>
				local name = self:GetName();
				_G[name.."_Text"]:SetTextColor(1,1,1,1);
			</OnEnter>
			<OnLeave>
				local name = self:GetName();
				_G[name.."_Text"]:SetTextColor(1,1,0);
			</OnLeave>
			<OnMouseDown>
				local name = self:GetName();
				local text = _G[name.."_Text"]:GetText();

				local f = TenTonHammer;
				if ( f.DatabaseStats["sort"] == text ) then
					f.DatabaseStats["direction"] = f.DatabaseStats["direction"] * -1;
				else
					f.DatabaseStats["direction"] = 1;
				end;
				f.DatabaseStats["sort"] = text;
				f.databaseSort();
			</OnMouseDown>
			<OnLoad>
				<![CDATA[
					function self:SetText(text)
						local name = self:GetName();
						if ( text ) then _G[name.."_Text"]:SetText(text); end;
					end;
	
					function self:SetJustifyH(justify)
						local name = self:GetName();
						_G[name.."_Text"]:SetJustifyH(justify);
					end;
					
					function self:SetJustifyV(justify)
						local name = self:GetName();
						_G[name.."_Text"]:SetJustifyV(justify);
					end;
	
					function self:SetFont(font, size)
						local name = self:GetName();
						local text = _G[name.."_Text"];
						text:SetFont(font, size);
					end;
					
					function self:SetColor(r,g,b,a)
						local name = self:GetName();
						_G[name.."_Text"]:SetTextColor(r, g, b, a);

					end;
					
					function self:GetColor()
						local name = self:GetName();
						return _G[name.."_Text"]:GetTextColor();
					end;
				]]>
			</OnLoad>
		</Scripts>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_Text" inherits="GameFontNormal">
					<Anchors>
						<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="0"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
	</Frame>
	<Frame name="TenTonHammer_Info" virtual="true">
		<Size>
			<AbsDimension x="280" y="13"/>
		</Size>
		<Scripts>
			<OnEnter>
				if ( self.TalentLink ) then
				GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
				GameTooltip:SetHyperlink(self.TalentLink);
				GameTooltip:Show();
				end;
				if ( self.Hyperlink ) then
				GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
				GameTooltip:AddLine(self.Hyperlink, nil, nil, nil, true);
				GameTooltip:Show();
				end;
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
			<OnLoad>
				<![CDATA[
					function self:SetText(left,right)
						local name = self:GetName();
						if ( left ) then _G[name.."_Left"]:SetText(left); end;
						if ( right ) then _G[name.."_Right"]:SetText(right); end;
					end;
					
					function self:SetJustifyH(justify)
						local name = self:GetName();
						_G[name.."_Left"]:SetJustifyH(justify);
					end;
					
					function self:SetJustifyV(justify)
						local name = self:GetName();
						_G[name.."_Left"]:SetJustifyV(justify);
					end;
					
					function self:Center()
						local name = self:GetName();
						local center = _G[name.."_Center"];
						local left = _G[name.."_Left"];
						center:SetText(left:GetText());
						center:Show();
						_G[name.."_Right"]:Hide();
						_G[name.."_Left"]:Hide();
						
					end;
					
					function self:SetFont(font, size)
						local name = self:GetName();
						local center = _G[name.."_Center"];
						local left = _G[name.."_Left"];
						local right = _G[name.."_Right"];
						center:SetFont(font, size);
						left:SetFont(font, size);
						right:SetFont(font, size);
					end;
					
					function self:UnCenter()
						local name = self:GetName();
						local center = _G[name.."_Center"];
						local left = _G[name.."_Left"];
						local right = _G[name.."_Right"];
						center:Hide();
						left:Show();
						right:Show();
					end;
					
					function self:SetColor(r,g,b,a)
						local name = self:GetName();
						_G[name.."_Left"]:SetTextColor(r, g, b, a);
						_G[name.."_Right"]:SetTextColor(r, g, b, a);
						_G[name.."_Center"]:SetTextColor(r, g, b, a);
					end;
					
					function self:GetColor()
						local name = self:GetName();
						return _G[name.."_Center"]:GetTextColor();
					end;
					
					function self:SetWordWrap(enabled)
						local name = self:GetName();
						_G[name.."_Left"]:SetWordWrap(enabled);
					end;
				]]>
			</OnLoad>
		</Scripts>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_Left" inherits="GameFontNormal">
					<Anchors>
						<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="0"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Right" inherits="GameFontNormal">
					<Anchors>
						<Anchor point="RIGHT" relativePoint="RIGHT" relativeTo="$parent">
							<Offset x="0"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Center" inherits="GameFontNormal" hidden="true">
					<Anchors>
						<Anchor point="CENTER" relativePoint="CENTER" relativeTo="$parent">
							<Offset x="0"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
	</Frame>
	<Button name="TenTonHammer_Button" inherits="UIPanelButtonTemplate" virtual="true">
		<Scripts>
			<OnEnter>
				if ( self.Hyperlink ) then
				GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
				GameTooltip:AddLine(self.Hyperlink, nil, nil, nil, true);
				GameTooltip:Show();
				end;
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
		</Scripts>
		<Size>
			<AbsDimension x="80" y="25" />
		</Size>
	</Button>
	<Frame name="TenTonHammer_DatabaseEntry" virtual="true">
		<Scripts>
			<OnLoad>
				<![CDATA[
					local name = self:GetName();
					
					function self:SetColor(r,g,b,a)
						local name = self:GetName();
						_G[name.."_Text_Name"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_Class"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_GearScore"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_RaidScore"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_PvEScore"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_PvPScore"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_ThumbsUp"]:SetTextColor(r,g,b,a);
						_G[name.."_Text_ThumbsDown"]:SetTextColor(r,g,b,a);
					end;
					
					
					local function onHover(a, b, c)
						a:SetTextColor(1, 0, 0, 1);
					end;
					
					local function onHoverOut(frame)
						--frame:SetColor(1, 1, 1);
					end;
					
					function self:SetupHeader(self)
						local name = self:GetName();
						setupArray = {
							"_Text_Name",
							"_Text_Class",
							"_Text_GearScore",
							"_Text_RaidScore",
							"_Text_PvEScore",
							"_Text_PvPScore",
						};
						for i,v in pairs(setupArray) do
							_G[name..v]:SetScript("OnEnter", onHover);
						end;
					end;
			
					function self:SetText(Name, Class, GearScore, RaidScore, PvEScore, PvPScore, ThumbsUp, ThumbsDown, ThumbStatus, Negative, Positive)
						Negative = Negative or {};
						Positive = Positive or {};
						local r,g,b,hex;
						local f = TenTonHammer;
						_G[name.."_Text_Name"]:SetText(Name or "");
						_G[name.."_Text_Class"]:SetText(Class or "");
						_G[name.."_Text_GearScore"]:SetText(GearScore or "");
						_G[name.."_Text_RaidScore"]:SetText(RaidScore or "");
						_G[name.."_Text_PvEScore"]:SetText(PvEScore or "");
						_G[name.."_Text_PvPScore"]:SetText(PvPScore or "");
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..(ThumbsUp or ""));
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..(ThumbsDown or ""));
							_G[name.."_ThumbsDown"]:Show();
							_G[name.."_ThumbsUp"]:Show();
						if not ( ThumbStatus ) then
							_G[name.."_ThumbsDown"]:Hide();
							_G[name.."_ThumbsUp"]:Hide();
						end;
						
						--/run a = "\124cffff0000Georgamel"; b = string.gsub(a, "\124cff.....(.)", ""); print(b);
						local nameRaw = string.gsub(Name, "|cff.....(.)", "");
						self.Player = nameRaw;
						
						
						if ( ThumbStatus == "1" ) then
							_G[name.."_ThumbsDown"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
							_G[name.."_ThumbsUp"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup_voted" });
						elseif ( ThumbStatus == "-1" ) then
							_G[name.."_ThumbsDown"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown_voted" });
							_G[name.."_ThumbsUp"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
						else
							_G[name.."_ThumbsDown"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
							_G[name.."_ThumbsUp"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
						end;
						
						local Tooltip = "";
						_G[name.."_Icon"]:SetBackdrop({ bgFile = nil});
						if ( #Positive > 0 ) and ( type(Positive) == "table" ) then
							_G[name.."_Icon"]:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargePositive" });
							for i,v in pairs(Positive) do
								Tooltip = Tooltip.."|cff00ff00"..v[1].."\n";
							end;
						end;
						if ( #Negative > 0 ) and ( type(Negative) == "table" ) then
							if ( Tooltip ~= "" ) then Tooltip = Tooltip.."\n"; end;
							_G[name.."_Icon"]:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargeNegative"});
							for i,v in pairs(Negative) do
								Tooltip = Tooltip.."|cffff0000"..v[1].."\n";
							end;
						end;
						_G[name.."_Icon"].TextLink = Tooltip;
					end;
					
					local ThumbsUpIcon = CreateFrame("Frame", name.."_ThumbsUp", self, "TenTonHammer_Icon");
					ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
					ThumbsUpIcon:SetSize(24, 24);
					ThumbsUpIcon:SetPoint("CENTER", self, "LEFT", 535, 0);
					
					local ThumbsDownIcon = CreateFrame("Frame", name.."_ThumbsDown", self, "TenTonHammer_Icon");
					ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
					ThumbsDownIcon:SetSize(24, 24);
					ThumbsDownIcon:SetPoint("CENTER", self, "LEFT", 585, 0);
					
					ThumbsUpIcon:SetScript("OnMouseUp", function(...)
						local ThumbsUp, ThumbsDown = self:GetParent():GetParent():Vote(self.Player, self.Realm, 1);
						ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup_voted" });
						ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..ThumbsUp);
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..ThumbsDown);
						--f:SetMainThumbs(ThumbsUp, ThumbsDown);
					end);
					
					ThumbsDownIcon:SetScript("OnMouseUp", function(...)
						local ThumbsUp, ThumbsDown = self:GetParent():GetParent():Vote(self.Player, self.Realm, -1);
						ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown_voted" });
						ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..ThumbsUp);
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..ThumbsDown);
						--f:SetMainThumbs(ThumbsUp, ThumbsDown);
					end);
					
					
					
				]]>
			</OnLoad>
		</Scripts>
		<Frames>
			<Frame name="$parent_Icon" inherits="TenTonHammer_Icon">
				<Anchors>
					<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parent">
						<Offset x="0"></Offset>
					</Anchor>
				</Anchors>
			</Frame>
		</Frames>
		<Size>
			<AbsDimension x="640" y="13"/>
		</Size>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_Text_Name" inherits="GameFontNormal" text="Arxkanitedfd" >
					<Anchors>
						<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="20"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_Class" inherits="GameFontNormal" text="Very Unholy Death Knight" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="190"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_GearScore" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="310"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_RaidScore" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="370"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_PvEScore" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="420"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_PvPScore" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="470"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_ThumbsUp" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="510"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parent_Text_ThumbsDown" inherits="GameFontNormal" text="1234" justifyH="CENTER" >
					<Anchors>
						<Anchor point="CENTER" relativePoint="LEFT" relativeTo="$parent">
							<Offset x="560"></Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
	</Frame>
	<Frame name="TenTonHammer_DatabaseEntry2" virtual="true" inherits="TenTonHammer_DatabaseEntry">
		<Scripts>
			<OnLoad>
				<![CDATA[
					local name = self:GetName();
					_G[name.."_Text_Class"]:Hide();
					--_G[name.."_Text_GearScore"]:Hide();
					_G[name.."_Text_RaidScore"]:Hide();
					_G[name.."_Text_PvEScore"]:Hide();
					_G[name.."_Text_PvPScore"]:Hide();
					_G[name.."_Text_ThumbsUp"]:SetPoint("CENTER", self, "LEFT", 170, 0);
					_G[name.."_Text_ThumbsDown"]:SetPoint("CENTER", self, "LEFT", 220, 0);
					_G[name.."_Text_GearScore"]:SetPoint("CENTER", self, "LEFT", 130, 0);
										
					function self:SetText(Name, Class, GearScore, RaidScore, PvEScore, PvPScore, ThumbsUp, ThumbsDown, ThumbStatus, Negative, Positive)
						Negative = Negative or {};
						Positive = Positive or {};
						local r,g,b,hex;
						local f = TenTonHammer;
						_G[name.."_Text_Name"]:SetText(Name or "");
						_G[name.."_Text_Class"]:SetText("");
						_G[name.."_Text_GearScore"]:SetText(GearScore or "");
						_G[name.."_Text_RaidScore"]:SetText("");
						_G[name.."_Text_PvEScore"]:SetText("");
						_G[name.."_Text_PvPScore"]:SetText("");
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..(ThumbsUp or ""));
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..(ThumbsDown or ""));
							_G[name.."_ThumbsDown"]:Show();
							_G[name.."_ThumbsUp"]:Show();
						if not ( ThumbStatus ) then
							_G[name.."_ThumbsDown"]:Hide();
							_G[name.."_ThumbsUp"]:Hide();
						end;
						if ( ThumbStatus == "1" ) then
							_G[name.."_ThumbsDown"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
							_G[name.."_ThumbsUp"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup_voted" });
						elseif ( ThumbStatus == "-1" ) then
							_G[name.."_ThumbsDown"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown_voted" });
							_G[name.."_ThumbsUp"]:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
						end;
						
						local Tooltip = "";
						_G[name.."_Icon"]:SetBackdrop({ bgFile = nil});
						if ( #Positive > 0 ) then
							_G[name.."_Icon"]:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargePositive" });
							for i,v in pairs(Positive) do
								Tooltip = Tooltip.."|cff00ff00"..v[1].."\n";
							end;
						end;
						if ( #Negative > 0 ) then
							if ( Tooltip ~= "" ) then Tooltip = Tooltip.."\n"; end;
							_G[name.."_Icon"]:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargeNegative"});
							for i,v in pairs(Negative) do
								Tooltip = Tooltip.."|cffff0000"..v[1].."\n";
							end;
						end;
						_G[name.."_Icon"].TextLink = Tooltip;
					end;
					
					local ThumbsUpIcon = CreateFrame("Frame", name.."_ThumbsUp", self, "TenTonHammer_Icon");
					ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
					ThumbsUpIcon:SetSize(24, 24);
					ThumbsUpIcon:SetPoint("CENTER", self, "LEFT", 195, 0);
					
					local ThumbsDownIcon = CreateFrame("Frame", name.."_ThumbsDown", self, "TenTonHammer_Icon");
					ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
					ThumbsDownIcon:SetSize(24, 24);
					ThumbsDownIcon:SetPoint("CENTER", self, "LEFT", 245, 0);
					
					ThumbsUpIcon:SetScript("OnMouseUp", function(...)
						local ThumbsUp, ThumbsDown = TenTonHammer:Vote(self.Player, self.Realm, 1);
						ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup_voted" });
						ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..ThumbsUp);
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..ThumbsDown);
						--f:SetMainThumbs(ThumbsUp, ThumbsDown);
					end);
					
					ThumbsDownIcon:SetScript("OnMouseUp", function(...)
						local ThumbsUp, ThumbsDown = TenTonHammer:Vote(self.Player, self.Realm, -1);
						ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown_voted" });
						ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
						_G[name.."_Text_ThumbsUp"]:SetText("|cff00ff00"..ThumbsUp);
						_G[name.."_Text_ThumbsDown"]:SetText("|cffff0000"..ThumbsDown);
						--f:SetMainThumbs(ThumbsUp, ThumbsDown);
					end);
					
					
					
				]]>
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="TenTonHammer_OptionCheck" virtual="true" inherits="UICheckButtonTemplate">
		<Scripts>
			<OnLoad>
				function self:SetText(text)
					_G[self:GetName().."Text"]:SetText(text);
				end;
			</OnLoad>
			<PostClick>
				if ( self.Setting ) then
					TenTonHammer_Settings[self.Setting] = self:GetChecked() or 0;
					TenTonHammer:runSettings();
				end;
			</PostClick>
			<OnShow>
				if ( self.Setting ) then
					self:SetChecked(TenTonHammer_Settings[self.Setting]);
				end;
			</OnShow>
			<OnEnter>
				if ( self.Tooltip ) then
					GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
					GameTooltip:AddLine(self.Name.."\n|cffffffff"..self.Tooltip, nil, nil, nil, true);
					GameTooltip:Show();
				end;
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
		</Scripts>
		<Size>
			<AbsDimension x="32" y="32"/>
		</Size>
	</Frame>
	<GameTooltip name="TenTonHammerTooltip" frameStrata="TOOLTIP" hidden="true" parent="UIParent" inherits="GameTooltipTemplate"/>
	<GameTooltip name="TenTonHammerTooltip2" frameStrata="TOOLTIP" hidden="true" parent="UIParent" inherits="GameTooltipTemplate"/>
	<Frame name="TenTonHammer" parent="UIParent" toplevel="true" movable="true" enableMouse="true" hidden="true" clampedToScreen="true" resizable="false" >
		<Scripts>
			<OnHidesdf>
				f.InspectReady = true;
			</OnHidesdf>
			<OnLoad>
				<![CDATA[
					--Load Localization--
					local AceLocale = LibStub("AceLocale-3.0");
					local L = AceLocale:GetLocale("GearScore4");
							
					_G[self:GetName()..'_Frame1']:Show();
					local Name = self:GetName();
					
					-- This Function Switches All Tabs --
					function self:SwitchTabs(tabID)
						--if ( self:IsVisible() ~= 1 ) then self:Show(); end;
						self:Show();
						if ( tabID > 5 ) then
							for i = 1,5 do
								_G[Name.."_MainButton"..i]:Hide();
							end;
						else
							for i = 1,4 do
								_G[Name.."_MainButton"..i]:Show();
							end;
						end
						local Name = self:GetName();
						if ( tabID == 9 ) then
							PanelTemplates_SetTab(TenTonHammer, 7);
						else
							PanelTemplates_SetTab(TenTonHammer, tabID);
						end;
						for i = 1,9 do
							_G[Name..'_Frame'..i]:Hide();
						end;
						_G[Name..'_EquipmentFrame']:Hide();
						_G[Name..'_Frame'..tabID]:Show();
						
					end;
					
					self.data = {
						["EquipOrder"] = {1,2,3,15,5,9,10,6,7,8,11,12,13,14,16,17},
					};
					
					
					local ButtonArray = 
					{
						{ 
							"Whisper",
							L["Whisper this player."],
							function(...)
								ChatFrame1EditBox:SetFocus(1); 
								ChatFrame1EditBox:SetText("/whisper "..self.CurrentTarget.." ");
							end,
						},
						{ 
							"Invite",
							L["Invite this player to your group."],
							function(...)
								InviteUnit(self.CurrentTarget);
							end,
						},
						{ 
							"Re-Scan",
							L["Refresh data on your curent target."],
							function(...)
								TenTonHammer:Scan("target");
							end,
						},
						{ 
							"Online",
							L["Generate a link to this player's Online Profile at PlayerScore.com. View World-wide rankings, comments, and more."],
							function(...)
								--http://www.wowarmory.com/character-sheet.xml?r=Detheroc&cn=Cassini
								--local url = "http://www.wowarmory.com/character-sheet.xml?r="..GetRealmName().."&cn="..self.CurrentTarget;
								local url = "http://www.playerscore.com/character/"..self.CurrentTarget.."/"..(self.CurrentTargetRealm or self.Realm).."/"..self.Region.."?utm_source=playerscore&utm_campaign=addon_profile";
								TenTonHammer_PopupFrame:Popup(url);
							end,
						},
						{ 
							"Scan All",
							L["Scan all members of your party or raid within inspection range. This will take about 30s"],
							function(...)
								TenTonHammer:ScanEntireParty();
							end,
						},
						{ "<- Prev", --6
							L["Previous Page"],
							function(...)
								local dataStats = TenTonHammer.DatabaseStats;
								TenTonHammer:displayDatabase(dataStats.group, tonumber(dataStats.page) - 1);
							end,
						},
						{ "Next ->",
							L["Next Page"],
							function(...)
								local dataStats = TenTonHammer.DatabaseStats;
								TenTonHammer:displayDatabase(dataStats.group, tonumber(dataStats.page) + 1);
							end,
						},
						{ 
							"All",
							L["View all database entries."],
							function(...)
								TenTonHammer:displayDatabase("all");
							end,
						},
						{
							"Guild",
							L["View entries for guild members."],
							function(...)
								TenTonHammer:displayDatabase("guild");
							end,
						},
						{
							"Group",
							L["View entries for party or raid."],
							function(...)
								TenTonHammer:displayDatabase("group");
							end,
						},

					}
					for i = 1,#ButtonArray do
						local Button = CreateFrame("Button", Name.."_MainButton"..i, self, "TenTonHammer_Button");
						Button:SetText(ButtonArray[i][1]);
						
						Button:SetPoint("TOPLEFT", self, 165 + 91 * i, -454);
						Button.Hyperlink = ButtonArray[i][2] or "";
						Button:SetScript("OnClick", ButtonArray[i][3] or nil);
						if ( i > 4 ) then Button:Hide(); end;
						Button:SetFrameLevel(Button:GetFrameLevel() + 1); -- this fixes a problem with the button's texture being behind the backdrop of the parent; but this only happens sometimes for some reason		
					end;
					
					_G[Name.."_MainButton5"]:SetPoint("TOPLEFT", _G[Name.."_MainButton4"], 0,0);
					_G[Name.."_MainButton5"]:Hide();
					
					_G[Name.."_MainButton8"]:SetPoint("TOPLEFT", _G[Name.."_MainButton1"], 0,0);
					_G[Name.."_MainButton9"]:SetPoint("TOPLEFT", _G[Name.."_MainButton2"], 0,0);
					_G[Name.."_MainButton10"]:SetPoint("TOPLEFT", _G[Name.."_MainButton3"], 0,0);
					
					
					_G[Name.."_MainButton6"]:SetPoint("TOPLEFT", _G[Name.."_MainButton6"]:GetParent(), "BOTTOMLEFT", 20, 85);
					_G[Name.."_MainButton7"]:SetPoint("TOPLEFT", _G[Name.."_MainButton7"]:GetParent(), "BOTTOMRIGHT", -100, 85);
					
					local buttonLink = self:GetParent():GetName().."_MainButton";
					
				]]>
			</OnLoad>
			<OnHide>
				<![CDATA[
					PlaySound("igMainMenuClose");
					self.ScanQue = {}
					if ( PlayerTalentFrame ) then
						--TenTonHammer_Frame3:ResetTalents();
						--ToggleTalentFrame();
						--PlayerTalentFrame:Hide();
					end;
					
				]]>
			</OnHide>
			<OnShow>
				<![CDATA[
					PlaySound("igMainMenuOpen");
					TenTonHammer:setupBonusTab()
					--TenTonHammerTab9:Hide();
					
					if not ( self.CurrentTarget ) then
						self:Scan("player");
					end;
					if not ( PlayerTalentFrame ) and ( UnitLevel("player") > 10 ) then
						ToggleTalentFrame();
						if ( PlayerTalentFrame ) and ( PlayerTalentFrame:IsVisible() ) then
							ToggleTalentFrame();
						end;
						PlayerTalentFrame:HookScript("OnShow", function(...) 
							TenTonHammer:Hide();
							TenTonHammer_Frame3:ResetTalents();
							--TenTonHammer_Frame3:Show();
							--TenTonHammer_Frame3:Hide();
							--TenTonHammer:Hide();
						end);
					end;
					
					if ( UnitLevel("player") < 10 ) then
						TenTonHammerTab3:Hide();
					end;
					
					if ( PlayerTalentFrame ) and ( PlayerTalentFrame:IsVisible() ) then
						ToggleTalentFrame();
					end;
					--PlayerTalentFrame:Hide();
				]]>
			</OnShow>

		</Scripts>
		<Size>
			<AbsDimension x="640" y="500" />
		</Size>
		<Anchors>
			<Anchor point="CENTER">
				<Offset x="0" y="0" />
			</Anchor>
		</Anchors>
		<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="false">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
			</BackgroundInsets>
			<TileSize>
				<AbsValue value="32"></AbsValue>
			</TileSize>
			<EdgeSize>
				<AbsValue value="32"></AbsValue>
			</EdgeSize>
		</Backdrop>
		<Frames>
			<Frame name="$parent_TileFrame" toplevel="true" >
				<Size>
					<AbsDimension x="610" y="50" />
				</Size>
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT">
						<Offset x="15" y="15" />
					</Anchor>
				</Anchors>
				<Backdrop bgFile="Interface\Addons\GearScore\UI\body_bg" tile="true">
					<TileSize>
						<AbsValue val="64"></AbsValue>
					</TileSize>
					<BackgroundInsets>
						<AbsInset left="0" right="0" top="10" bottom="0"></AbsInset>
					</BackgroundInsets>
				</Backdrop>
				<Frames>
					<Frame name="$parent_LogoFrame" toplevel="true" >
						<Frames>
							<Frame  name="$parent_CopyrightFrame" toplevel="true">
								<Scripts>
									<OnEnter>
										GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
										GameTooltip:AddLine("GearScore™/PlayerScore™ 4.11.02 \n©2010 - Ten Ton Hammer™, All Rights Reserved.");
										GameTooltip:Show();
										self:GetParent():SetBackdrop({ bgFile = "Interface\\Addons\\GearScore\\UI\\playerscore2" });
									</OnEnter>
									<OnLeave>
										GameTooltip:Hide();
										self:GetParent():SetBackdrop({ bgFile = "Interface\\Addons\\GearScore\\UI\\playerscore" });
									</OnLeave>
								</Scripts>
								<Anchors>
									<Anchor point="TOPLEFT" relativeTo="$parent"></Anchor>
									<Anchor point="BOTTOMRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT">
										<Offset x="-25" y="-45"></Offset>
									</Anchor>
								</Anchors>
							</Frame>

						</Frames>
						<Size>
							<AbsDimension x="224" y="56" />
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="BOTTOMLEFT">
								<Offset x="5" y="40" />
							</Anchor>
						</Anchors>
						<Backdrop bgFile="Interface\Addons\GearScore\UI\playerscore" tile="false">
							<TileSize>
								<AbsValue value="64"></AbsValue>
							</TileSize>
						</Backdrop>
					</Frame>
				</Frames>
			</Frame>

			<Frame name="$parent_TitleFrame" toplevel="true" movable="false" enableMouse="false" inherits="UIDialogFrame">
				<Scripts>
					<OnLoad>
						<![CDATA[
							-- Allows Users to move the main frame by dragging the title box.
							self:EnableMouse(true);
							self:SetMovable(true);
							self:RegisterForDrag("LeftButton");
							self:SetScript("OnDragStart", function() self:GetParent():StartMoving() end);
							self:SetScript("OnDragStop", function() self:GetParent():StopMovingOrSizing() end);
						]]>
					</OnLoad>
				</Scripts>
				<Size>
					<AbsDimension x="320" y="64"></AbsDimension>
				</Size>
				<Anchors>
					<Anchor point="TOPCENTER">
						<Offset x="160" y="49"></Offset>
					</Anchor>
				</Anchors>
				<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="true">
					<BackgroundInsets>
						<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
					</BackgroundInsets>
					<TileSize>
						<AbsValue value="32"></AbsValue>
					</TileSize>
					<EdgeSize>
						<AbsValue value="16"></AbsValue>
					</EdgeSize>
				</Backdrop>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture name="$parent_MainTexture">
							<Anchors>
								<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
									<Offset x="10" y="-10"></Offset>
								</Anchor>
								<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
									<Offset x="-10" y="10"></Offset>
								</Anchor>
							</Anchors>
							<Color r="0" g="0" b="0" a="1.0"></Color>
						</Texture>
					</Layer>
					<Layer level="OVERLAY">
						<FontString name="$parent_PlayerText" inherits="GameFontNormal" text="Arxkanite - 80 Tauren Shaman">
							<Anchors>
								<Anchor point="CENTER">
									<Offset x="0" y="7"></Offset>
								</Anchor>
							</Anchors>
						</FontString>
						<FontString name="$parent_GuildText" inherits="GameFontNormal" text="&lt;Rogue Angels&gt;">
							<Anchors>
								<Anchor point="CENTER">
									<Offset x="0" y="-9"></Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
			<Button name="$parent_ExitButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="CENTER" relativeTo="$parent" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-20" y="-20"></AbsDimension>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parentTab1" inherits="TenTonHammer_Tab_Template" id="1" text="Summary"></Button>
			<Button name="$parentTab2" inherits="TenTonHammer_Tab_Template" id="2" text="Equipment"></Button>
			<Button name="$parentTab3" inherits="TenTonHammer_Tab_Template" id="3" text="Talents"></Button>
			<Button name="$parentTab4" inherits="TenTonHammer_Tab_Template" id="4" text="Experience"></Button>
			<Button name="$parentTab5" inherits="TenTonHammer_Tab_Template" id="5" text="PvP"></Button>
			<Button name="$parentTab6" inherits="TenTonHammer_RightTab_Template" id="6" text="Options">
				<Scripts>
					<OnLoad>
						<![CDATA[
							-- The First Element in right-align tabs needs to set its new position.
							--Load Localization--
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
							self:SetText("|cffFFFFFF" .. L[self:GetText()]);
							self:SetPoint("TOPRIGHT", self:GetParent(), "BOTTOMRIGHT", 0, 8);
						]]>
					</OnLoad>
					
					
				</Scripts>
			</Button>
			<!--<Button name="$parentTab7" inherits="TenTonHammer_RightTab_Template" id="7" text="Help"></Button>-->
			<Button name="$parentTab7" inherits="TenTonHammer_RightTab_Template" id="7" text="Bonus"></Button>
			<Button name="$parentTab8" inherits="TenTonHammer_RightTab_Template" id="8" text="Database"></Button>
			
			<Frame name="$parent_EquipmentFrame" inherits="TenTonHammer_Frame" hidden="true">
				<Scripts>
					<OnLoad>
						<![CDATA[
							local Textures = { "Head", "Neck", "Shoulder", "Chest", "Chest", "Waist", "Legs", "Feet", "Wrists", "Hands", "RFinger", "Finger", "Trinket", "Trinket", "Chest", "MainHand", "SecondaryHand", "" };
							local Order = {1,2,3,15,5,9,10,6,7,8,11,12,13,14,16,17};
							-- Create Equipment Slot Frames --
							for i = 1, 16 do
								local frame = CreateFrame("Frame", self:GetName().."_EquipSlot"..Order[i], self, "TenTonHammer_EquipSlotTemplate");
								if ( i <= 7 ) then frame:SetPoint("TOP", self, "TOP", 0, i*-40 - 20);
									frame:SetPoint("TOP", self, "TOP", 0, i*-40 -20);
								elseif ( i > 7 ) and ( i <= 14 ) then
									frame:SetPoint("TOP", self, "TOP", 240, i*-40 +260);
								elseif ( i > 14 ) then 
									frame:SetPoint("TOP", self, "TOP", 65 + (i-14) * 40, 14*-40 +230);
								end;
								frame:SetID(i);
								frame.defaultTexture = "Interface\\PaperDoll\\UI-PaperDoll-Slot-"..Textures[i];
								frame:SetBackdrop({bgFile = frame.defaultTexture});
							end;
						]]>
					</OnLoad>
				</Scripts>
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
						<Offset x="25" y="30"></Offset>
					</Anchor>
				</Anchors>
				<Frames>
					<DressUpModel xsi:type="PlayerModel" name="$parent_Model" inherits="DressUpModel">
						<Scripts>
							<OnUpdate>
								if self.rotation ~= 0 then self:SetFacing(self:GetFacing() + self.rotation); end;
							</OnUpdate>
							<OnLoad>
								self:SetUnit("player");
								self.rotation = 0;
							</OnLoad>
						</Scripts>
						<Size>
							<AbsDimension x="200" y="250" />
						</Size>
						<Anchors>
							<Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT">
								<Offset x="-100" y="-70" />
							</Anchor>
						</Anchors>
						<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\Addons\GearScore\UI\new-border" tile="true">
							<BackgroundInsets>
								<AbsInset left="11" right="12" top="12" bottom="11" />
							</BackgroundInsets>
							<TileSize>
								<AbsValue val="32" />
							</TileSize>
							<EdgeSize>
								<AbsValue val="32" />
							</EdgeSize>
						</Backdrop>
						<Frames>
							<Button name="$parent_RotateLeftButton" inherits="TenTonHammer_RotateButton" id="3"></Button>
							<Button name="$parent_RotateRightButton" inherits="TenTonHammer_RotateButton" id="1">
								<Anchors>
									<Anchor point="TOPLEFT" relativeTo="$parent_RotateLeftButton" relativePoint="TOPRIGHT"/>
								</Anchors>
							</Button>
						</Frames>
						<Layers>
							<Layer level="BACKGROUND">
								<Texture name="$parent_MainTexture">
									<Anchors>
										<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
											<Offset x="10" y="-10"></Offset>
										</Anchor>
										<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
											<Offset x="-10" y="10"></Offset>
										</Anchor>
									</Anchors>
									<Color r="0" g="0" b="0" a="1.0"></Color>
								</Texture>
							</Layer>
						</Layers>
					</DressUpModel>
				</Frames>
			</Frame>
			<Frame name="$parent_WaitFrame" frameStrata="DIALOG" inherits="TenTonHammer_Frame" id="Wait" toplevel="true">
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parent_Text" inherits="GameFontNormal" text="">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="CENTER">
									<offset>
										<AbsDimension x="0" y="-50"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
					<Layer level="BACKGROUND">
						<Texture name="$parent_MainTexture">
							<Anchors>
								<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
									<Offset x="10" y="-10"></Offset>
								</Anchor>
								<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
									<Offset x="-10" y="10"></Offset>
								</Anchor>
							</Anchors>
							<Color r="0" g="0" b="0" a="1.0"></Color>
						</Texture>
					</Layer>
					<Layer level="ARTWORK">
						<Texture name="$parent_Logo" file="Interface\AddOns\GearScore\UI\logo">
							<Size>
								<AbsDimension x="512" y="256"></AbsDimension>
							</Size>
							<Anchors>
								<Anchor point="CENTER">
									<Offset x="0" y="0"></Offset>
								</Anchor>
							</Anchors>
						</Texture>
					</Layer>

				</Layers>
			</Frame>
			<Frame name="$parent_Frame1" inherits="TenTonHammer_Frame" id="Summary">
				<Scripts>
					<onLoad>
						<![CDATA[
							--Load Localization--
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
							
							local name = self:GetName();
							local StatusArray = { 
								L["PlayerScores"],
								L["GearScore"], 
								L["Raid"], 
								L["PvP GearScore"], 
								L["PvP"], 
								"",
								L["Information"],
								"Restoration Shaman",
								"<Rogue Angels>",
								"Player Rating",
								"",
								L["Raiding Difficulty"],
								"Level 85 Heroics",
								"Blackwing Descent",
								"Throne of the Four Winds",
								"",
								L["Raiding Progression"],
								"Trial of the Crusader",
								"Icecrown Citidel",
								"",
								L["Status"],
								"Somethign",
								"Somethign",
								"Somethign",
								"Somethign",
								"Somethign",
								"Somethign",
								"Primary Stats",
								"1328 Stamina",
								"957 Intellect",
								"445 Spirit",
								"2345 Mana",
							};
							local ValueArray = {
								"",
								"|cFFFF00006283|r", 
								"|cFF4C51FE3819|r", 
								"|cFF4C51FE3968|r", 
								"|cFFF078005175|r", 
								"",
								"",
								"( 0 / 12 / 31 )",
								"Core Raider",
								"5/5",
								"",
								"",
								"Easy",
								"Moderate",
								"Difficult",
								"",
								"",
								"10 / 12",
								"10 / 12",
								"",
								"",
								"OK!",
								"OK!",
								"OK!",
								"OK!",
								"OK!",
								"OK!",
								"",
								"1636 Spell Power",
								"3.87% Haste",
								"20.38% Crit",
								"17% Hit",
							};
							local HyperlinkArray = {
								--[2] = L["Super"].."\n|cffffffff"..L["This is an aggregate of the various other scores, to give you a quick indication of a player's overall competency. It is weighted to consider the GearScore most heavily. The Crafting Score does not contribute to the Super Score."],
								[2] = L["GearScore"].."\n|cffffffff"..L["GearScore is based on a player's equipment. It considers item level, gems and enchants, and appropriateness to class and spec. Two handed weapons receive bonuses, as do Hunter ranged weapons."],
								[3] = L["Raid"].."\n|cffffffff"..L["Raid score is based on the number of completed raids."],
								[4] = L["PvE"].."\n|cffffffff"..L["PvP GearScore is normal GearScore adjusted to compensate for performance quality in PvP Combat."],
								[5] = L["PvP"].."\n|cffffffff"..L["PvP Score is based on arena and battleground participation, win/lose ratios, and PvP kills."],
								--[7] = L["Crafting"].."\n|cffffffff"..L["Crafting Score is based on Professions maxed, recipes learned, and secondary skills."],
							};
							local Headers = {
								[1] = true,
								[7] = true,
								[12] = true,
								[17] = true,
								[21] = true,
								[28] = true,
							};
							for i = 1,27 do
								local iAdd = 0;
								if ( i == 4 ) or ( i == 5 ) then iAdd = 8; end;
								local Text = CreateFrame("Frame", name.."_Info"..i, self, "TenTonHammer_Info")
								Text:SetPoint("TOPLEFT", self, 35, (i + 1) * -14 - 5 - iAdd);
								Text:SetText(StatusArray[i], ValueArray[i]);
								if ( HyperlinkArray[i] ) then Text.Hyperlink = HyperlinkArray[i]; end;
								if ( Headers[i] ) then
									Text:SetText(" - "..StatusArray[i].." - ");
									Text:Center();
									--Text:SetColor(0.98,.42,0,1);
									Text:SetColor(1,1,1,1);
								end;
							end;
							
							
							
							for i = 28,32 do
								local Text = CreateFrame("Frame", name.."_Info"..i, self, "TenTonHammer_Info")
								Text:SetPoint("TOPLEFT", self, 340, (i - 5) * -15  + 3);
								Text:SetWidth(260);
								Text:SetText("sdf", "sdf");
								if ( i > 26 ) then Text.Hyperlink = L["These values represent stats acquired from gear only. They do not account for Talents, Buffs, Passive Abilities, Spells, or Base Stats."]; end;
								if ( Headers[i] ) then
									Text:SetText(" - "..StatusArray[i].." - ");
									Text:Center();
									--Text:SetColor(0.98,.42,0,1);
									Text:SetColor(1,1,1,1);
								end;
							end;
							
							local ThumbsUpIcon = CreateFrame("Frame", name.."_ThumbsUp", self, "TenTonHammer_Icon");
							ThumbsUpIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsup" });
							ThumbsUpIcon:SetSize(32, 32);
							ThumbsUpIcon:SetFrameStrata("HIGH");
							
							local ThumbsDownIcon = CreateFrame("Frame", name.."_ThumbsDown", self, "TenTonHammer_Icon");
							ThumbsDownIcon:SetBackdrop({bgFile="Interface\\AddOns\\GearScore\\UI\\thumbsdown" });
							ThumbsDownIcon:SetSize(32, 32);
							ThumbsDownIcon:SetFrameStrata("HIGH");
						]]>
					</onLoad>
					<onShow>
						<![CDATA[
							-- Attach The Equipment Frame to this Frame --
							local EquipFrame = _G[self:GetParent():GetName().."_EquipmentFrame"];
							EquipFrame:SetParent(self);
							EquipFrame:Show();


						]]>
					</onShow>
				</Scripts>
				<layers>
					<layer level="artwork">
						<FontString name="$parent_TagText" inherits="GameFontNormal" a="" text="">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
									<offset>
										<AbsDimension x="0" y="65"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
					</layer>
				</layers>
			</Frame>
			<Frame name="$parent_Frame2" inherits="TenTonHammer_Frame" id="GearScore">
				<Scripts>
					<OnLoad>
						<![CDATA[
							--Load Localization--
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
							local Name = self:GetName();
							
							-- Time to generate our headers --
							local headers = {
								{"Slot", 40, -30},
								{"Item", 230, -30},
								{"iLevel", 415, -30},
								{"Score", 465, -30},
								{"Gems", 515, -30},
								{"Enchant", 570, -30}
							};
							for i,v in pairs(headers) do
								local String = self:CreateFontString(Name.."_HeaderString"..i, "OVERLAY", "GameFontNormal");
								String:SetPoint("TOPLEFT", self, "TOPLEFT", v[2], v[3]);
								String:SetText(v[1]);
							end;
							
							
							-- Time To generate our 17 Text Strings for their equipment.
							
							local ItemArray = { 
								"Head", 
								"Neck", 
								"Shoulder", 
								"Back",
								"Chest", 
								"Wrist",
								"Gloves", 
								"Waist", 
								"Legs", 
								"Feet", 
								"Finger 1", 
								"Finger 2", 
								"Trinket 1", 
								"Trinket 2", 
								"Main Hand", 
								"Off Hand", 
							}
							
							local GemTextureArray = {
								["Interface\\ItemSocketingFrame\\UI-EmptySocket-Meta"] = true,
								["Interface\\ItemSocketingFrame\\UI-EmptySocket-Red"] = true,
								["Interface\\ItemSocketingFrame\\UI-EmptySocket-Blue"] = true,
								["Interface\\ItemSocketingFrame\\UI-EmptySocket-Yellow"] = true,
							}
							
							local function HookGemOnEnter(self)
								--GameTooltip:Hide();
								GameTooltip:AddLine(" ");
								if ( self.sucks ) then
									GameTooltip:AddLine("|cff00ff00"..L["Left-Click to flag this gem as positive for this spec."]);
								else
									GameTooltip:AddLine("|cffff0000"..L["Right-Click to flag this gem as negative for this spec."]);
								end;
								GameTooltip:Show();
							end;
							
							local function HookEnchantOnEnter(self)
								if ( self.EnchantName ) then
								
									if ( self.sucks ) then
										GameTooltip:AddLine(" ");
										GameTooltip:AddLine("|cffff0000"..L["You have marked this enchantment as bad for this spec."]);
									end;
								
									--GameTooltip:Hide();
									GameTooltip:AddLine(" ");
									if ( self.sucks ) then
										GameTooltip:AddLine("|cff00ff00"..L["Left-Click to flag this enchant as positive for this spec."]);
									else
										GameTooltip:AddLine("|cffff0000"..L["Right-Click to flag this enchant as negative for this spec."]);
									end;
									GameTooltip:Show();
								end;
							end;
							
							local function HookEnchantClick(self, button)
								if ( self.EnchantName ) and ( TenTonHammer_Frame3.SpecID ) then
									local SpecID = TenTonHammer_Frame3.SpecID;
									if ( button == "RightButton" ) then
										self:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargeNegative" });
										TenTonHammer_Elite[SpecID]["ENCHANTS"][self.EnchantName] = 2;
										self.sucks = true;
									elseif ( button == "LeftButton" ) then
										self:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargePositive" });
										TenTonHammer_Elite[SpecID]["ENCHANTS"][self.EnchantName] = nil;
										self.sucks = false;
									end;
								end;
							end;
							
							local Order = {1,2,3,15,5,9,10,6,7,8,11,12,13,14,16,17};
							
							local function HookGemClick(self, button)
								if ( self.GemName ) and ( TenTonHammer_Frame3.SpecID ) then
									local SpecID = TenTonHammer_Frame3.SpecID;
									
									for i = 1, 17 do
										local Index = Order[i];
										for j = 1,3 do
											local GemIcon = _G["TenTonHammer_Frame2_GemIcon"..j.."-"..Index];
											if ( GemIcon.GemName == self.GemName ) then
												if ( button == "RightButton" ) then
													GemIcon:SetBackdrop({ bgFile = "Interface\\Icons\\Spell_ChargeNegative" });
													GemIcon.sucks = true;
													TenTonHammer_Elite[SpecID]["GEMS"][self.GemName] = 2;
												elseif ( button == "LeftButton" ) then
													GemIcon:SetBackdrop(self.OriginalIcon);
													GemIcon.sucks = false;
													TenTonHammer_Elite[SpecID]["GEMS"][self.GemName] = nil;
												end;
											end;
										end;
									end;
								end;
							end;
							
							
							for i = 1,#Order do
								local j = Order[i];
								local TitleString = self:CreateFontString(Name.."_TitleString"..j, "OVERLAY", "GameFontNormal");
								TitleString:SetPoint("TOPLEFT", self, "TOPLEFT", 30, -18*i - 30);
								TitleString:SetText("|cFF909090"..L[ItemArray[i]]);
								
								local NameString = self:CreateFontString(Name.."_NameString"..j, "OVERLAY", "GameFontNormal");
								NameString:SetPoint("TOPLEFT", self, "TOPLEFT", 130, -18*i - 30);
								
								local ItemIcon = CreateFrame("Frame", Name.."_ItemIcon"..j, self, "TenTonHammer_Icon");
								ItemIcon:SetPoint("TOPLEFT", self, "TOPLEFT", 110, -18*i - 30);
								
								local LevelString = self:CreateFontString(Name.."_LevelString"..j, "OVERLAY", "GameFontNormal");
								LevelString:SetPoint("TOPLEFT", self, "TOPLEFT", 420, -18*i - 30);
								
								local GearString = self:CreateFontString(Name.."_GearString"..j, "OVERLAY", "GameFontNormal");
								GearString:SetPoint("TOPLEFT", self, "TOPLEFT", 468, -18*i - 30);
								
								local GemIcon1 = CreateFrame("Frame", Name.."_GemIcon1-"..j, self, "TenTonHammer_Icon");
								GemIcon1:SetPoint("TOPLEFT", self, "TOPLEFT", 510, -18*i - 30);
								local GemIcon2 = CreateFrame("Frame", Name.."_GemIcon2-"..j, self, "TenTonHammer_Icon");
								GemIcon2:SetPoint("TOPLEFT", self, "TOPLEFT", 530, -18*i - 30);
								local GemIcon3 = CreateFrame("Frame", Name.."_GemIcon3-"..j, self, "TenTonHammer_Icon");
								GemIcon3:SetPoint("TOPLEFT", self, "TOPLEFT", 550, -18*i - 30);
								
								local EnchantIcon = CreateFrame("Frame", Name.."_EnchantIcon"..j, self, "TenTonHammer_EnchantIcon");
								EnchantIcon:SetPoint("TOPLEFT", self, "TOPLEFT", 590, -18*i - 30);
								
								

								GemIcon1:HookScript("OnEnter", HookGemOnEnter);
								GemIcon2:HookScript("OnEnter", HookGemOnEnter);
								GemIcon3:HookScript("OnEnter", HookGemOnEnter);
								
								GemIcon1:SetScript("OnMouseUp", HookGemClick);
								GemIcon2:SetScript("OnMouseUp", HookGemClick);
								GemIcon3:SetScript("OnMouseUp", HookGemClick);
																
								EnchantIcon:HookScript("OnEnter", HookEnchantOnEnter);
								EnchantIcon:HookScript("OnMouseUp", HookEnchantClick);
							end;
							
							
							local Total = CreateFrame("Frame", Name.."_Total", self, "TenTonHammer_Info")
							Total:SetPoint("TOPLEFT", self, "TOPLEFT", 316, -394);
							Total:SetText("Total GearScore:", "1234");
							Total:SetWidth(153);
							
							local AIL = CreateFrame("Frame", Name.."_AIL", self, "TenTonHammer_Info");
							AIL:SetPoint("TOPLEFT", self, "TOPLEFT", 233, -374);
							AIL:SetText("Equipped Average Item Level:", "1234");
							AIL:SetWidth(235);
						]]>
					</OnLoad>
					<OnShow>
						-- Attach The Equipment Frame to this Frame --
						--local EquipFrame = _G[self:GetParent():GetName().."_EquipmentFrame"];
						--EquipFrame:SetParent(self);
						--EquipFrame:Show();
					</OnShow>
				</Scripts>
			</Frame>
			<Frame name="$parent_Frame3" inherits="TenTonHammer_Frame" id="Talents">
				<Scripts>
					<OnLoad>
						<![CDATA[
							if ( true ) then return; end;
						
							--[[
							--Load Localization--
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
							
							local name = self:GetName();
							for i = 1,30 do
								local Text = CreateFrame("Frame", name.."_Info"..i, self, "TenTonHammer_Info")
								Text:SetPoint("TOPLEFT", self, 35, (i + 1) * -13 - 5);
								Text:SetText("asdfasdf", "2 / 3");
								Text:SetScript("OnEnter", function(...)
									if ( Text.TalentLink ) then
										GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
										GameTooltip:SetHyperlink(Text.TalentLink);
										GameTooltip:AddLine(" ");
										GameTooltip:AddLine("|cff00ff00"..L["Left-Click to flag this talent as positive."]);
										GameTooltip:AddLine(L["Middle-Click to flag this talent as neutral."]);
										GameTooltip:AddLine("|cffff0000"..L["Right-Click to flag this talent as negative."]);
										GameTooltip:Show();
									end;
									if not ( Text.Header ) then 
										Text.CurrentColor = { Text:GetColor() };
										Text:SetColor(0.5,0.5,1,1);
									end;
								end );
								Text:SetScript("OnLeave", function(...)
									if ( Text.CurrentColor ) then
										Text:SetColor(unpack(Text.CurrentColor));
									end;
									GameTooltip:Hide();
								end);
								Text:SetScript("OnMouseUp", function(self, button)
									if ( Text.TalentName ) and ( TenTonHammer_Frame3.SpecID ) then
										local SpecID = TenTonHammer_Frame3.SpecID;
										if ( button == "RightButton" ) then
											Text:SetColor(1,0,0,1);
											TenTonHammer_Elite[SpecID]["TALENTS"][Text.TalentName] = 2;
											--TenTonHammer_TalentStatus[Text.TalentName] = 2;
											Text:SetDesaturated(true);
										elseif ( button == "LeftButton" ) then
											Text:SetColor(0,1,0,1);
											TenTonHammer_Elite[SpecID]["TALENTS"][Text.TalentName] = 1;
											--TenTonHammer_TalentStatus[Text.TalentName] = 1;
											Text:SetDesaturated(false);
										elseif ( button == "MiddleButton" ) then
											Text:SetColor(0.99999780301005,0.81960606575012,0,1);
											TenTonHammer_Elite[SpecID]["TALENTS"][Text.TalentName] = nil;
											--TenTonHammer_TalentStatus[Text.TalentName] = nil;
											Text:SetDesaturated(false);
										end;
										Text.CurrentColor = { Text:GetColor() };
									end;
								end);
							end;
							]]
							
							function self:ResetTalents()
								local a = PlayerTalentFramePanel1; 
								local b = PlayerTalentFramePanel2; 
								local c = PlayerTalentFramePanel3; 
								a:SetParent(PlayerTalentFrameTalents);
								b:SetParent(PlayerTalentFrameTalents);
								c:SetParent(PlayerTalentFrameTalents);
								a:ClearAllPoints();
								b:ClearAllPoints();
								c:ClearAllPoints();
								a:SetPoint("BOTTOMLEFT", PlayerTalentFrameInset, "BOTTOMLEFT", 5,3);
								b:SetPoint("TOPLEFT", a, "TOPRIGHT", 1,0);
								c:SetPoint("TOPLEFT", b, "TOPRIGHT", 1,0);
								
								local ActiveTalentGroup = GetActiveTalentGroup(false);
								--TalentFrame_Update(a);
								--TalentFrame_Update(b);
								--TalentFrame_Update(c);
								
								for i = 1,3 do
									for j = 1,GetNumTalents(i, false, false, ActiveTalentGroup) do
										local TalentLink = GetTalentLink(i, j, false, false, ActiveTalentGroup);
										_G["PlayerTalentFramePanel"..i.."Talent"..j].tooltipLink = TalentLink;
									end;
								end;
					
							end;
						
							
						]]>
					</OnLoad>
					<OnHide>
						if ( true ) then return; end;
						self:ResetTalents();
					</OnHide>
					<OnShow>
						<![CDATA[
							if ( true ) then return; end;
						
							-- Attach The Equipment Frame to this Frame --
							local EquipFrame = _G[self:GetParent():GetName().."_EquipmentFrame"];
							--EquipFrame:SetParent(self);
							--EquipFrame:Show();
							
							if not ( PlayerTalentFrame ) then
								ToggleTalentFrame();
							end;
							PlayerTalentFrame:Hide();
							
							local a = PlayerTalentFramePanel1; 
							local b = PlayerTalentFramePanel2; 
							local c = PlayerTalentFramePanel3; 
							
							a:ClearAllPoints();
							
							a:SetParent(self);
							b:SetParent(self);
							c:SetParent(self);
							
							a:SetPoint("TOPLEFT", 12,-42);
							b:SetPoint("TOPLEFT", a, "TOPRIGHT");
							c:SetPoint("TOPLEFT", b, "TOPRIGHT");

							
							self:SetScale(0.98);
							
							
						]]>
					</OnShow>
				</Scripts>
			</Frame>
			<Frame name="$parent_Frame4" inherits="TenTonHammer_Frame" id="Experience">
				<Scripts>
					<OnLoad>
						<![CDATA[
						local name = self:GetName();
						for i = 1,30 do
							local Text = CreateFrame("Frame", name.."_Info"..i, self, "TenTonHammer_Info")
							Text:SetPoint("TOPLEFT", self, 35, (i + 1) * -13 - 5);
							Text:SetText("asdfasdf", "64");
							
							Text:SetScript("OnEnter", function(...)
								if not ( Text.Header ) then 
									Text.CurrentColor = { Text:GetColor() };
									Text:SetColor(0.5,0.5,1,1);
								end;
							end);
							Text:SetScript("OnLeave", function(...)
								if ( Text.CurrentColor ) then
									Text:SetColor(unpack(Text.CurrentColor));
								end;
							end);
							Text:SetScript("OnMouseUp", function(...)
								if ( Text.Dungeon ) then
									local f = TenTonHammer;
									local BossInfoIndex = 2;
									_G[f:GetName().."_Frame4_Boss1"]:SetText(" - "..Text.Dungeon.." - ");
									_G[f:GetName().."_Frame4_Boss1"]:Center();
									f:WipeBoss();
									for BossIndex, BossData in pairs(f.AchievementData[Text.Dungeon]) do
										local BossKills = BossData[2];
										local BossName = BossData[1];
										local r,g,b = f:GetColor100(BossKills, 0, 5);
										_G[f:GetName().."_Frame4_Boss"..BossInfoIndex]:SetText(BossName, BossKills);
										_G[f:GetName().."_Frame4_Boss"..BossInfoIndex]:SetColor(r,g,b,1);
										BossInfoIndex = BossInfoIndex + 1;
									end;
								end;
							end);
						end;
						for i = 1,30 do
							local Text = CreateFrame("Frame", name.."_Boss"..i, self, "TenTonHammer_Info")
							Text:SetPoint("TOPLEFT", self, 335, (i + 1) * -13 - 5);
							Text:SetText("asdfasdf", "64");
							Text:SetColor(0,1,0,1);
						end;
						]]>
					</OnLoad>
				</Scripts>
			</Frame>
			<Frame name="$parent_Frame5" inherits="TenTonHammer_Frame" id="PvP">
				<Scripts>
					<OnLoad>
						<![CDATA[
						--Load Localization--
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");

						local name = self:GetName();
						local StatusArray = {
							L["Battlegrounds"],
							L["Total Played"],
							L["Victories"],
							"",
							"Alterac Valley Victories",
							"Arathi Basin Victories",
							"Battle for Gilneas",
							"Eye of the Storm",
							"Strand of the Ancients",
							"Twin Peaks",
							"Warsong Gulch",
							"Isle of Conquest",
							"",
							L["Arenas"],
							L["Total Played"],
							L["Victories"],
							"",
							"2v2 Victories",
							"3v3 Victories",
							"5v5 Victories",
							"",
							L["Duels"],
							L["Total Duels"],
							L["Victories"],
							};
							local ValueArray = {
								"",
								"240", 
								"96 (50%)", 
								"", 
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"12 (50%)",
								"",
								"",
								"1097",
								"544 (50%)",
								"",
								"391 (50%)",
								"146 (50%)",
								"7 (50%)",
								"",
								"",
								"51",
								"24 (50%)"
							};
							local Headers = {
								[1] = true,
								[14] = true,
								[22] = true,
							};
							for i = 1,24 do
								local Text = CreateFrame("Frame", name.."_Info"..i, self, "TenTonHammer_Info")
								Text:SetPoint("TOPLEFT", self, 343, (i + 1) * -14 - 5);
								Text:SetText(StatusArray[i], ValueArray[i]);
								if ( Headers[i] ) then
									Text:SetText(" - "..StatusArray[i].." - ");
									Text:Center();
									--Text:SetColor(0.98,.42,0,1);
									Text:SetColor(1,1,1,1);
									Text:Show();
								end;
							end;
							]]>
					</OnLoad>
				</Scripts>
			</Frame>
			<Frame name="$parent_Frame8" inherits="TenTonHammer_Frame" id="Database">
				<Scripts>
					<OnLoad>
						<![CDATA[
						local name = self:GetName();
						
						local superText = {
							"Name", "Class & Spec", "GearScore", "Raid", "PvP GS", "PvP"
						};
						
						local superPosition = { 20, 175, 277, 355, 400, 460 };
						
						for i = 2,26 do
							local Text = CreateFrame("Frame", name.."_Data"..i, self, "TenTonHammer_DatabaseEntry")
							Text:SetPoint("TOPLEFT", self, 20, (i) * -15 - 5);
							if ( i == 1 ) then
								Text:SetText("Name", "Class & Spec", "GearScore", "Raid", "PvP GS", "PvP", nil, nil, nil);
								_G[name.."_Data1_Text_Name"]:SetJustifyH("CENTER");
							end;
							--KEVIN SUCKS--
						end;
						
						for i,v in pairs(superText) do
							local Text = CreateFrame("Frame", name.."_Head"..i, self, "TenTonHammer_DatabaseHead");
							Text:SetJustifyH("CENTER")
							Text:SetPoint("CENTER", self, "TOPLEFT", superPosition[i] + 44, -27);
							Text:SetText(v);
							if ( i == 2 ) then Text:SetWidth(100); end;
						end;
						
						]]>
					</OnLoad>
					<OnHide>
						<![CDATA[
						local buttonLink = self:GetParent():GetName().."_MainButton";
						for i = 1, 10 do
							local buttonObject = _G[buttonLink..i];
							if ( i < 5 ) then buttonObject:Show(); else buttonObject:Hide(); end;
						end;
						]]>
					</OnHide>

					<OnShow>
						<![CDATA[
						
							for i = 1, 10 do
								local buttonObject = _G[self:GetParent():GetName().."_MainButton"..i];
								if ( i < 5 ) then buttonObject:Hide(); else buttonObject:Show(); end;
							end;
							
							TenTonHammer:displayDatabase();
							
						]]>
					</OnShow>
				</Scripts>
				<layers>
					<layer level="artwork">
						<FontString name="$parent_TagText" inherits="GameFontNormal" text="|cffffffffFull Database Support Comming Soon!">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
									<offset>
										<AbsDimension x="0" y="65"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
					</layer>
				</layers>
			</Frame>
			<Frame name="$parent_Frame9" inherits="TenTonHammer_Frame" id="Bonus">
				<Scripts>
					<OnLoad>
						<![CDATA[
						
							self.setup = false;
							self.BonusTabDataLeft = {
								[1] = { "h1", "Your Personal PlayerScore Rankings" },
								[2] = { "h2", "Your Online Profile" },
								[3] = { "link", "View your online PlayerScore profile.", "http://www.playerscore.com/character/%%name%%/%%server%%/%%region%%?utm_source=playerscore" },
								[4] = { "blank" },
								[5] = { "h2", "Global Rankings" },
								[6] = { "link", "View your global ranking.", "http://www.playerscore.com/scoreboards?toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore" },
								[7] = { "link", "View your global %%class%% ranking.", "http://www.playerscore.com/scoreboards?class=%%class%%&toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore" },
								[8] = { "blank" },
								[9] = { "h2", "%%server%% Scoreboards" },
								[10] = { "link", "View your scoreboard on %%server%%", "http://www.playerscore.com/scoreboards?server=%%server%%&toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore" },
								[11] = { "link", "View your %%class%% scoreboard on %%server%%", "http://www.playerscore.com/scoreboards?server=%%server%%&class=%%class%%&toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore" },
								[12] = { "blank" },
								[13] = { "h2", "%%guild%% Scoreboards" },
								[14] = { "link", "View your scoreboard in %%guild%%.", "http://www.playerscore.com/scoreboards?server=%%server%%&guild=%%guild%%&toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore" },
								[15] = { "link", "View your %%class%% scoreboard in\n%%guild%%.", "http://www.playerscore.com/scoreboards?server=%%server%%&class=%%class%%&guild=%%guild%%&toon_server=%%server%%&character=%%name%%&region=%%region%%&utm_source=playerscore",2 },
								[16] = { "blank" },
								[17] = { "blank" },
								[18] = { "h1", "PlayerScore Rankings for %%guild%%" },
								[19] = { "h2", "Guild Scoreboards" },
								[20] = { "link", "View a scoreboard of %%guild%% members.", "http://www.playerscore.com/scoreboards?server=%%server%%&guild=%%guild%%&region=%%region%%&utm_source=playerscore" },
								[21] = { "link", "View %%guild%%'s global ranking.", "http://www.playerscore.com/scoreboards/guild?server=%%server%%&guild=%%guild%%&region=%%region%%&utm_source=playerscore" },
								[22] = { "h1", "Other Resources" },
								[23] = { "h2", "FAQ / Help" },
								[24] = { "link", "View our FAQ & Help pages to learn more \nabout the addon.", "http://www.playerscore.com/faq?utm_source=playerscore", 2 },
								[25] = { "blank", },
								[26] = { "h2", "Report Bugs" },
								[27] = { "link", "Please report addon bugs to the official\nbug report page.", "http://www.playerscore.com/bugs?utm_source=playerscore", 2},
								[28] = { "blank", },
								[29] = { "h2", "Make Suggestions"},
								[30] = { "link", "Make your suggestions for new features or\nchanges in the addon in our forums.", "http://forums.playerscore.com/?utm_source=playerscore", 2 },
								[31] = { "blank", },
								[32] = { "h2", "PlayerScore Blog" },
								[33] = { "link", "Learn about upcoming features from\nthe PlayerScore team by reading the blog.", "http://www.playerscore.com/news?utm_source=playerscore", 2 },
								[34] = { "blank", },
								[35] = { "h2", "Claim Your Character",  },
								[36] = { "link", "Earn a special PlayerScore in-game tag,\nand keep track of comments and ratings\nfor your character", "pie", 3 },
								
							};
							
							
							local function onHover(frame)
								frame:SetColor(1, 0, 0);
							end;
							
							local function onHoverOut(frame)
								frame:SetColor(1, 1, 1);
							end;
							
							local function onClick(frame)
								local url = frame.url;
								if ( url == "pie" ) then
									CommandVerify();
								else
									TenTonHammer_PopupFrame:Popup(url);
								end;
								--print("|cffff0000PlayerScore:|r Copy this url (ctrl + c) and paste it (ctrl + v) into your web-browser to view this resource.");
							end;
							
							local y = -90;
							local name = self:GetName();
							for i,v in ipairs(self.BonusTabDataLeft) do
								if ( v[1] ~= "blank" ) then
									local x = 18;
									if ( i > 21 ) then x = 336; end;
									if ( i == 22 ) then y = -90; end;
									local Text = CreateFrame("Frame", name.."_Item"..i.."_Left", self, "TenTonHammer_Info");
									if ( v[1] == "h1" ) then
										Text:SetColor(0.8, 0.4, 0);
									elseif ( v[1] == "h2" ) then
										Text:SetColor(0.8, 0.8, 0);
										x = x + 11;
									elseif ( v[1] == "link" ) then
										Text:SetColor(1,1,1);
										x = x + 22;
										Text.url = v[3];
										Text:SetScript("OnEnter", onHover);
										Text:SetScript("OnLeave", onHoverOut);
										Text:SetScript("OnMouseDown", onClick);
									end;	
									Text:SetPoint("TOPLEFT", self, x, y);
									if ( v[4] ) then
										Text:SetJustifyH("LEFT");
										Text:SetJustifyV("TOP");
										Text:SetHeight(12 * v[4]);
										y = y - ((v[4] - 1) * 8);
									end;
									if ( v[1] == "h1" ) then 
										y = y - 0; 
										Text:SetScale(1);
									end;
									Text:SetText(v[2]);
								end;
								y = y - 16;
							end;
							
							-- Create Main Headers
							
							local mainHeader = CreateFrame("Frame", name.."_Header", self, "TenTonHammer_Info");
							mainHeader:SetText("Additional PlayerScore Resources");
							mainHeader:Center();
							mainHeader:SetColor(0.8, 0.8, 0);
							mainHeader:SetWidth(640);
							mainHeader:SetPoint("TOPLEFT", self, -110, -15);
							mainHeader:SetScale(1.5);
							
							local otherText = CreateFrame("Frame", name.."_Directions", self, "TenTonHammer_Info");
							otherText:SetPoint("TOPLEFT", self, 0, -55);
							otherText:SetText("Click the white text to generate a link to an additional PlayerScore resource.");
							otherText:SetWidth(640);
							otherText:SetColor(1,1,1);
							otherText:Center();
						]]>
					</OnLoad>
				</Scripts>
				<layers>
					<layer level="artwork">
						<FontString name="$parent_TagText" inherits="GameFontNormal" a="" text="">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
									<offset>
										<AbsDimension x="0" y="65"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
					</layer>
				</layers>
			</Frame>
			<Frame name="$parent_Frame7" inherits="TenTonHammer_Frame" id="Help">
				<layers>
					<layer level="artwork">
						
						<FontString name="$parent_TagText" inherits="GameFontNormal" a="" text="|cffffffffFor additional support or assistance visit forums.playerscore.com">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
									<offset>
										<AbsDimension x="0" y="65"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
						
					</layer>
				</layers>
			</Frame>
			<Frame name="$parent_Frame6" inherits="TenTonHammer_Frame" id="Options">
				<Scripts>
					<OnLoad>
						<![CDATA[
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
							
							local name = self:GetName();
							
							local function SetCheckUp(check, v)
								check.Setting = v[2];		
								check.Name = v[1];
								check:SetText(v[1]);
								check.Tooltip = v[3];						
							end;
							
							
							local TooltipOptionsArray = {
								{ L["Show GearScore"], "gearOnTip", L["Show known GearScores of players on mouse-over tooltip."]},
								{ L["Show Raid Score"], "raidOnTip", L["Show known Raid Scores of players on mouse-over tooltip."]},
								{ L["Show PvP GearScore"], "pveOnTip", L["Show known PvP GearScores of players on mouse-over tooltip."]},
								{ L["Show PvP Score"], "pvpOnTip", L["Show known PvP Scores of players on mouse-over tooltip."]},
								{ L["Show Player Ratings"], "ratingOnTip", L["Show known Player Ratings of players on mouse-over tooltip."]},
								{ L["Show Chat Frame Tooltips"], "chat", L["Shows PlayerScore tooltips in your chat frame"]},
								{ L["Show Off-Spec ItemScores"], "showOffSpec", L["Shows off-spec Item scores in item tooltips."]},
								{ L["Equipped Average Item Level"], "ailOnTip", L["Shows Equipped Average Item Level for Quick-Scan Targets."]},
							};
							
							-- Create Our Tooltip Section
							for i,v in ipairs(TooltipOptionsArray) do
								local _check = CreateFrame("CheckButton", name.."_Check"..i, self, "TenTonHammer_OptionCheck");
								_check:SetPoint("TOPLEFT", self, "TOPLEFT", 25,-27 * i - 32);
								SetCheckUp(_check, v);
							end;
							
							TooltipOptionsArray = {
								{ L["Use Hammer Icon"], "button_hammer", L["When enabled, PlayerScore will display a hammer icon on your screen which you can use to access PlayerScore features."]  },
								
								{ L["Anchor Top-Right"], "TOPRIGHT", L["Anchor the hammer icon to the top-right of the pop-out controls."] },
								{ L["Anchor Top-Left"], "TOPLEFT", L["Anchor the hammer icon to the top-left of the pop-out controls."] },
								{ L["Anchor Bottom-Right"], "BOTTOMRIGHT", L["Anchor the hammer icon to the bottom-right of the pop-out controls."] },
								{ L["Anchor Bottom-Left"], "BOTTOMLEFT", L["Anchor the hammer icon to the bottom-left of the pop-out controls."] },
								
								{ L["Use Minimap Button"], "minimap_button", L["|cffcccccc(Currently Unavailable, look for an update soon!)"] },
								--{ L["Use Titan Panel Plugin"], "panel", L["|cffcccccc(Currently Unavailable, look for an update soon!)"]},
								--{ L["Use Foobar Plugin"], "foobar", L["|cffcccccc(Currently Unavailable, look for an update soon!)"]},
								{ L["Enable Quick-Scan Mode"], "target_inspect1", L["When enbled, this mode will scan & score a characther when you target them.\n\nTo prevent lag, this mode will not function while you are in combat."], },
								{ L["Verbose"], "verbose", L["When enabled with Quick-Scan mode, tooltips will display more detailed information."] },
								{ L["Master Loot Mode"], "masterloot", L["When enabled loot items will display upgrade values of your raid members."] },
								{ L["Quick Rate Mode"], "quickrate", L["When enabled, PlayerScore will display a small window for quickly rating party members in a 5-man dungeon."] },
								{ L["iLvl Chat Compatibility"], "filter", L["Adds GearScore requirements in parentheses to LFM messages."] },
							};
							
							_G[name.."_Title"]:SetFont("Fonts\\FRIZQT__.TTF", 16);
							
							local _text = self:CreateFontString(name.."_Text1", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffff - Tooltip Options - ");
							_text:SetPoint("TOP", self, "TOPLEFT", 105, -50);
							_text:SetWidth(200);
							
							_text = self:CreateFontString(name.."_Text2", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffff - Inspect Integration - ");
							_text:SetPoint("TOP", self, "TOPLEFT", 105, -284);
							_text:SetWidth(200);
							
							_check = CreateFrame("CheckButton", name.."_Check_Inspect", self, "TenTonHammer_OptionCheck");
							_check:SetPoint("TOPLEFT", self, "TOPLEFT", 25, -300);
							SetCheckUp(_check, {L["Integrate with Inspection"], "inspect", L["When enabled, this option replaces the default inspection UI with PlayerScore's Scan feature."]});
							
							_text = self:CreateFontString(name.."_Text3", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffff - Database Options - ");
							_text:SetPoint("TOP", self, "TOPLEFT", 105, -342);
							_text:SetWidth(200);
							
							_check = CreateFrame("CheckButton", name.."_Check_Database", self, "TenTonHammer_OptionCheck");
							_check:SetPoint("TOPLEFT", self, "TOPLEFT", 25, -358);
							SetCheckUp(_check, {L["Save Playerscore Data"], "database", L["When enabled, PlayerScore will save the score information.\n\nOut of date information is automatically removed, and database size is automatically limited.\n\nThis feature allows you to view PlayerScores of players on mouseover or in chat.\n"]});
							
							_check = CreateFrame("CheckButton", name.."_Check_Updater", self, "TenTonHammer_OptionCheck");
							_check:SetPoint("TOPLEFT", self, "TOPLEFT", 25, -390);
							SetCheckUp(_check, {L["Download Online Database"], "online", L["(This option requires the PlayerScore Updater)\n\nWhen Enabled, this option will allow your updater to download PlayerScore data for this server.\n\nDownload the updater at PlayerScore.com"]});

							_text = self:CreateFontString(name.."_Text3", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffff - UI Options - ");
							_text:SetPoint("TOP", self, "TOPLEFT", 415, -50);
							_text:SetWidth(200);	
							
							local function PostClick(self)
								for i = 2,5  do
									_G[name.."_Check2_"..i]:SetChecked(0);
								end;
								self:SetChecked(1);
								TenTonHammer_Settings["anchor"] = self.Setting;
								TenTonHammer:runSettings();
							end;
							
							local function ShowCheck(self)
								if ( self.Setting == TenTonHammer_Settings["anchor"] ) then self:SetChecked(1); end;
							end;
							
							for i,v in ipairs(TooltipOptionsArray) do
								_check = CreateFrame("CheckButton", name.."_Check2_"..i, self, "TenTonHammer_OptionCheck");
								_check:SetPoint("TOPLEFT", self, "TOPLEFT", 225,-32 * i - 32);
								SetCheckUp(_check, v);
								if ( i > 1 and i < 6 ) then
									_check:SetPoint("TOPLEFT", self, "TOPLEFT",255,-32 * i - 32);
									_check:SetScript("PostClick", PostClick);
									_check:SetScript("OnShow", ShowCheck);
								end;
							end;
							
							TooltipOptionsArray = {
								{ L["Enable Equipment Tab"], "EquipTab", L["Enable this tab."]},
								{ L["Enable Experience Tab"], "ExperienceTab", L["Enable this tab."]},
								{ L["Enable PvP Tab"], "PvPTab", L["Enable this tab."]},
								{ L["Enable Bonus Tab"], "NewsTab", L["Enable this tab."]},
								{ L["Enable Database Tab"], "GroupTab", L["Enable this tab."]},
							};							
							-- Create Our Tooltip Section
							for i,v in ipairs(TooltipOptionsArray) do
								local _check = CreateFrame("CheckButton", name.."_Checky"..i, self, "TenTonHammer_OptionCheck");
								_check:SetPoint("TOPLEFT", self, "TOPLEFT", 450,-32 * i - 32);
								SetCheckUp(_check, v);
							end;
							
							_text = self:CreateFontString(name.."_ThemeColor", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffffSub-Theme:");
							_text:SetPoint("TOP", self, "TOPLEFT", 500, -305);
							_text:SetJustifyH("Left");
							
							_text = self:CreateFontString(name.."_ThemeColor", "OVERLAY", "GameFontNormal");
							_text:SetText("|cffffffffTheme:");
							_text:SetPoint("TOP", self, "TOPLEFT", 485, -256);
							_text:SetJustifyH("Left");
						]]>
					</OnLoad>
				</Scripts>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parent_Title" inherits="GameFontNormal" text="|cffffffff - PlayerScore Options -"  justifyH="CENTER">
							<Anchors>
								<Anchor point="TOP" relativePoint="TOP" relativeTo="$parent">
									<Offset x="0" y="-20"></Offset>
								</Anchor>
							</Anchors>
							<FontHeight>
								<RelValue val="36"/>
							</FontHeight>
						</FontString>
						<FontString name="$parent_TagText" inherits="GameFontNormal" a="" text="|cffffffffFor additional support or assistance visit forums.playerscore.com">
							<Anchors>
								<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
									<offset>
										<AbsDimension x="0" y="65"></AbsDimension>
									</offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="$parent_ThemeColor" inherits="UIDropDownMenuTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT">
								<Offset>
									<AbsDimension x="440" y="-322"/>
								</Offset>
							</Anchor>
						</Anchors>
						<Layers>
							<Layer level="OVERLAY">
								<Texture name="$parent_HighlightTexture" file="Interface\PaperDollInfoFrame\UI-Character-Tab-Highlight" alphaMode="ADD" hidden="true">
									<Anchors>
										<Anchor point="TOPLEFT">
											<Offset>
												<AbsDimension x="15" y="3"/>
											</Offset>
										</Anchor>
										<Anchor point="BOTTOMRIGHT">
											<Offset>
												<AbsDimension x="-30" y="-2"/>
											</Offset>
										</Anchor>
									</Anchors>
								</Texture>
							</Layer>
						</Layers>
						<Scripts>
							<OnLoad>
								<![CDATA[
								function self:Initialize()
									local info = UIDropDownMenu_CreateInfo();
									local Theme = TenTonHammer_Settings["Theme"];
									local f = TenTonHammer;
									if not ( f.data ) then return; end;
									local Template = f.data.TemplateList[Theme];
									if ( Template.MultiColor ) then 
										self:Show();
									else
										self:Hide();
									end;
									local colorChoice = Template.Colors;
									
									for i,v in pairs(colorChoice) do
										info.text = v;
										info.func = function(...) 
											TenTonHammer_Settings["color"] = v; 
											TenTonHammer:runSettings(); 
											UIDropDownMenu_SetSelectedID(self, i);
										end;
										info.checked = nil;
										UIDropDownMenu_AddButton(info);
									end;
								end;
								
								--UIDropDownMenu_Initialize(self, self.Initialize);
								]]>
							</OnLoad>
							<OnShow>
								self:Initialize();
								UIDropDownMenu_Initialize(self, self.Initialize);

								local Theme = TenTonHammer_Settings["Theme"];
								local f = TenTonHammer;
								local Template = f.data.TemplateList[Theme];

								local colorChoice = {};
								for i,v in pairs(Template.Colors) do
								colorChoice[v] = i;
								end;
								UIDropDownMenu_SetSelectedID(self, colorChoice[TenTonHammer_Settings["color"]] or 1);
							</OnShow>
						</Scripts>
					</Frame>
					<Frame name="$parent_TemplateChoice" inherits="UIDropDownMenuTemplate" id="1">
						<Anchors>
							<Anchor point="TOPLEFT">
								<Offset>
									<AbsDimension x="440" y="-268"/>
								</Offset>
							</Anchor>
						</Anchors>
						<Layers>
							<Layer level="OVERLAY">
								<Texture name="$parent_HighlightTexture" file="Interface\PaperDollInfoFrame\UI-Character-Tab-Highlight" alphaMode="ADD" hidden="true">
									<Anchors>
										<Anchor point="TOPLEFT">
											<Offset>
												<AbsDimension x="15" y="3"/>
											</Offset>
										</Anchor>
										<Anchor point="BOTTOMRIGHT">
											<Offset>
												<AbsDimension x="-30" y="-2"/>
											</Offset>
										</Anchor>
									</Anchors>
								</Texture>

							</Layer>
						</Layers>
						<Scripts>
							<OnLoad>
								<![CDATA[
								function self:Initialize()
									local info = UIDropDownMenu_CreateInfo();
									local f = TenTonHammer;
									local colorChoice = {};
						
									for i,v in pairs(f.data.TemplateList) do
										tinsert(colorChoice, v.Name);
									end;
									
									for i,v in pairs(colorChoice) do
										info.text = v;
										info.func = function(...) 
											local CurrentTemplate = TenTonHammer.data["TemplateList"][TenTonHammer_Settings["Theme"] or ""];
											if ( CurrentTemplate ) and ( CurrentTemplate.OnUnLoad ) then
												CurrentTemplate:OnUnLoad();
											end;
											TenTonHammer_Settings["Theme"] = v; 
											UIDropDownMenu_SetSelectedID(self, i);
											TenTonHammer:runSettings(); 
										end;
										info.checked = nil;
										UIDropDownMenu_AddButton(info);
									end;
								end;
								
								--UIDropDownMenu_Initialize(self, self.Initialize);
								]]>
							</OnLoad>
							<OnShow>
								self:Initialize();
								UIDropDownMenu_Initialize(self, self.Initialize);
								local f = TenTonHammer;

								local colorChoice = {};
								local counter = 1;
								for i,v in pairs(f.data.TemplateList) do
									colorChoice[i] = counter;
									counter = counter + 1;
								end;
								UIDropDownMenu_SetSelectedID(self, colorChoice[TenTonHammer_Settings["Theme"]] or 1);
							</OnShow>
						</Scripts>
					</Frame>
					<Slider name="$parent_Slider" inherits="OptionsSliderTemplate">
						<Size>
							<AbsDimension x="144" y="16"/>
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT">
								<Offset>
									<AbsDimension x="450" y="-372"/>
								</Offset>
							</Anchor>
						</Anchors>
						<Scripts>
							<OnLoad>
								getglobal(self:GetName().."High"):SetText("10");
								getglobal(self:GetName().."Low"):SetText("1");
								self:SetMinMaxValues(1,10);
								self:SetValueStep(1);
								getglobal(self:GetName().."Text"):SetText("UI Scale");


								local Button = CreateFrame("Button", self:GetName().."_ApplyButton", self, "TenTonHammer_Button");
								Button:SetText("Update UI Scale");
								Button:SetWidth(150);
								Button:SetPoint("TOPLEFT", self, 0, -20);
								--Button.Hyperlink = ButtonArray[i][2] or "";
								Button:SetScript("OnClick", function(...)
								TenTonHammer_Settings["scale"] = self:GetValue();
								TenTonHammer:runSettings();
								end);


							</OnLoad>

							<OnShow>
								self:SetValue(TenTonHammer_Settings["scale"]);
							</OnShow>
							
						</Scripts>
					</Slider>
				</Frames>
			</Frame>
		</Frames>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_AddonInfoText" inherits="GameFontNormal" text="">
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="BOTTOM">
							<offset>
								<AbsDimension x="0" y="20"></AbsDimension>
							</offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture name="$parent_MainTexture">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
							<Offset x="10" y="-10"></Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
							<Offset x="-10" y="10"></Offset>
						</Anchor>
					</Anchors>
					<Color r="0" g="0" b="0" a="1.0"></Color>
				</Texture>
			</Layer>
		</Layers>
	</Frame>
	<Frame name="TenTonHammer_PopupFrame" parent="UIParent" hidden="true" toplevel="true">
		<Scripts>
			<OnLoad>
				function self:Popup(url)
					TenTonHammer_PopupFrame:Show();
					TenTonHammer_PopupFrame_URLBox:SetText(url);
					TenTonHammer_PopupFrame_URLBox:HighlightText();
				end;
			</OnLoad>
		</Scripts>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_AddonInfoText" inherits="GameFontNormal" text="|cffffffffPress Ctrl-C to copy, and Ctrl-V to paste into your browser.">
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="TOP">
							<offset>
								<AbsDimension x="0" y="-25"></AbsDimension>
							</offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture name="$parent_MainTexture">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
							<Offset x="10" y="-10"></Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
							<Offset x="-10" y="10"></Offset>
						</Anchor>
					</Anchors>
					<Color r="0" g="0" b="0" a="0"></Color>
				</Texture>
			</Layer>
		</Layers>
		<Size>
			<AbsDimension x="420" y="100" />
		</Size>
		<Anchors>
			<Anchor point="CENTER">
				<Offset x="0" y="100" />
			</Anchor>
		</Anchors>
		<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="false">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
			</BackgroundInsets>
			<TileSize>
				<AbsValue value="32"></AbsValue>
			</TileSize>
			<EdgeSize>
				<AbsValue value="32"></AbsValue>
			</EdgeSize>
		</Backdrop>
		<Frames>
			<Button text="Close" inherits="TenTonHammer_Button">
				<Anchors>
					<Anchor point="CENTER">
						<Offset x="0" y="-20" />
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TenTonHammer_PopupFrame:Hide();
					</OnClick>
				</Scripts>
			</Button>
			<EditBox name="$parent_URLBox" inherits="InputBoxTemplate">
				<Size>
					<AbsDimension x="320" y="32" />
				</Size>
				<Anchors>
					<Anchor point="CENTER">
						<Offset x="0" y="5" />
					</Anchor>
				</Anchors>
				<Scripts>
					<OnEscapePressed>
						TenTonHammer_PopupFrame:Hide();
					</OnEscapePressed>
					<OnEnterPressed>
						TenTonHammer_PopupFrame:Hide();
					</OnEnterPressed>
				</Scripts>
			</EditBox>
		</Frames>
	</Frame>
	<Frame name="TenTonHammer_PopupFrame2" parent="UIParent" hidden="true" toplevel="true">
		<Scripts>
			<OnLoad>
				function self:Popup(url)
				TenTonHammer_PopupFrame2:Show();
				TenTonHammer_PopupFrame2_URLBox:SetText(url);
				TenTonHammer_PopupFrame2_URLBox:HighlightText();
				end;
			</OnLoad>
		</Scripts>
		<Layers>
			<Layer level="OVERLAY">
				<FontString name="$parent_AddonInfoText" inherits="GameFontNormal" text="|cffffffffWhich mode would you like to run PlayerScore in?">
					<Anchors>
						<Anchor point="CENTER" relativeTo="$parent" relativePoint="TOP">
							<offset>
								<AbsDimension x="0" y="-25"></AbsDimension>
							</offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="BACKGROUND">
				<Texture name="$parent_MainTexture">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
							<Offset x="10" y="-10"></Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
							<Offset x="-10" y="10"></Offset>
						</Anchor>
					</Anchors>
					<Color r="0" g="0" b="0" a="0"></Color>
				</Texture>
			</Layer>
		</Layers>
		<Size>
			<AbsDimension x="420" y="100" />
		</Size>
		<Anchors>
			<Anchor point="CENTER">
				<Offset x="0" y="100" />
			</Anchor>
		</Anchors>
		<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="false">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
			</BackgroundInsets>
			<TileSize>
				<AbsValue value="32"></AbsValue>
			</TileSize>
			<EdgeSize>
				<AbsValue value="32"></AbsValue>
			</EdgeSize>
		</Backdrop>
		<Frames>
			<Button text="Manual" inherits="TenTonHammer_Button">
				<Size>
					<AbsDimension x="80" y ="25" />
				</Size>
				<Anchors>
					<Anchor point="CENTER">
						<Offset x="0" y="-10" />
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						TenTonHammer:Show();
						TenTonHammer:SwitchTabs(6);
						TenTonHammer_Settings["addonMode"] = 1;
						self:GetParent():Hide();
					</OnClick>
					<onLoad>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						self:SetText(L["Manual"]);
					</onLoad>
					<onEnter>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
						GameTooltip:AddLine("|cffFFFFFF"..L["Manually Set Options"]);
						GameTooltip:AddLine(L["View the options menu now, and manually set your PlayerScore options"], nil, nil, nil, true);
						GameTooltip:Show();
					</onEnter>
					<onLeave>
						GameTooltip:Hide();
					</onLeave>
				</Scripts>
			</Button>
			<Button text="Lite" inherits="TenTonHammer_Button">
				<Size>
					<AbsDimension x="80" y ="25" />
				</Size>
				<Anchors>
					<Anchor point="CENTER">
						<Offset x="-100" y="-10" />
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						self:GetParent():Hide();
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");

						local updatedSettings =
						{
						["inspect"] = 0,
						["chat"] = 0,
						["database"] = 0,
						["masterloot"] = 0,
						["minimap_button"] = 0,
						["online"] = 0,
						["update"] = 0,
						["EquipTab"] = 0,
						["TalentTab"] = 0,
						["ExperienceTab"] = 0,
						["PvPTab"] = 0,
						["NewsTab"] = 0,
						["GroupTab"] = 0,
						["ailOnTip"] = 0,
						["addonMode"] = -1,
						["quickrate"] = 0,
						};
						for i,v in pairs(updatedSettings) do
						TenTonHammer_Settings[i] = v;
						end;
						TenTonHammer:runSettings();
						print(L["Welcome to PlayerScore's Lite-Mode. Type '/ps' for options or to re-enable Full Mode"]);
					</OnClick>
					<onLoad>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						self:SetText(L["Lite"]);
					</onLoad>
					<onEnter>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
						GameTooltip:AddLine("|cffFFFFFF"..L["Lite Mode"]);
						GameTooltip:AddLine(L["Disables the Graphical Interface and only displays information on tooltips."], nil, nil, nil, true);
						GameTooltip:Show();
					</onEnter>
					<onLeave>
						GameTooltip:Hide();
					</onLeave>
				</Scripts>
			</Button>
			<Button text="Full" inherits="TenTonHammer_Button">
				<Size>
					<AbsDimension x="80" y ="25" />
				</Size>
				<Anchors>
					<Anchor point="CENTER">
						<Offset x="100" y="-10" />
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						local updatedSettings =
						{
						["inspect"] = 1,
						["chat"] = 1,
						["database"] = 1,
						["masterloot"] = 1,
						["minimap_button"] = 1,
						["online"] = 1,
						["update"] = 1,
						["EquipTab"] = 1,
						["TalentTab"] = 1,
						["ExperienceTab"] = 1,
						["PvPTab"] = 1,
						["NewsTab"] = 1,
						["GroupTab"] = 1,
						["ailOnTip"] = 1,
						["addonMode"] = 1,
						["quickrate"] = 1,
						};
						for i,v in pairs(updatedSettings) do
						TenTonHammer_Settings[i] = v;
						end;
						self:GetParent():Hide();
						TenTonHammer:runSettings();
					</OnClick>
					<onLoad>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						self:SetText(L["Full"]);
					</onLoad>
					<onEnter>
						local AceLocale = LibStub("AceLocale-3.0");
						local L = AceLocale:GetLocale("GearScore4");
						GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
						GameTooltip:AddLine("|cffFFFFFF"..L["Full Mode"]);
						GameTooltip:AddLine(L["View the options menu now, and manually set your PlayerScore options"], nil, nil, nil, true);
						GameTooltip:Show();
					</onEnter>
					<onLeave>
						GameTooltip:Hide();
					</onLeave>
				</Scripts>
			</Button>
			
			
		</Frames>
	</Frame>
	<Frame name="TenTonHammer_MainButton" inherits="TenTonHammer_EquipSlotTemplate" toplevel="true" parent="UIParent" movable="true" enableMouse="true" clampedToScreen="true"  >
		<Scripts>
			<OnLoad>
				<![CDATA[
					local AceLocale = LibStub("AceLocale-3.0");
					local L = AceLocale:GetLocale("GearScore4");
					local Name = self:GetName();
						
					function self:Tooltip()
						GameTooltip:SetOwner(self, "ANCHOR_CURSOR");
							GameTooltip:AddLine(L["Left-Click to scan your current target"], nil, nil, nil, false);
						if ( TenTonHammer_ControlFrame:IsVisible() ) then
							GameTooltip:AddLine(L["Right-Click to Collapse."], nil, nil, nil, true);
						else
							GameTooltip:AddLine(L["Right-Click to Expand."], nil, nil, nil, true);
						end;
						GameTooltip:AddLine("\nYou can hide this hammer in the options menu.");
						GameTooltip:Show();
					end;
					
					self:RegisterForDrag("LeftButton");
					self:SetScript("OnDragStart", function() self:StartMoving() end);
					self:SetScript("OnDragStop", function() self:StopMovingOrSizing() end);
					
					local ButtonArray = 
					{
						{ 
							"My Profile",
							L["View your PlayerScore profile."],
							function(...)
								TenTonHammer:Scan("player");
							end,
						},
						{ 
							"My Online Profile",
							L["View your Online PlayerScore profile."],
							function(...)
								--http://www.wowarmory.com/character-sheet.xml?r=Detheroc&cn=Cassini
								--local url = "http://www.wowarmory.com/character-sheet.xml?r="..GetRealmName().."&cn="..self.CurrentTarget;
								local PlayerName, PlayerRealm = UnitName("player");
								PlayerRealm = PlayerRealm or GetRealmName();
								local url = "http://www.playerscore.com/character/"..PlayerName.."/"..PlayerRealm.."/"..TenTonHammer.Region;
								TenTonHammer_PopupFrame:Popup(url);
							end,
						},
						{ 
							"Scan Target",
							L["View the PlayerScore profile of your current target."],
							function(...)
								TenTonHammer:Scan("target");
							end,
						},
						{ 
							"View Database",
							L["View PlayerScore summary for your entire party or raid."],
							function(...)
								TenTonHammer:Show();
								TenTonHammer:SwitchTabs(8)
							end,
						},
						{ 
							"Scan Group",
							L["Scan all members of your party or raid within inspection range. This will take about 30s"],
							function(...)
								TenTonHammer:ScanEntireParty();
							end,
						},
						{ 
							"Rate Group",
							L["Allows you to quickly rate your current party. You must have scanned them at least once to rate them."],
							function(...)
								TenTonHammer_QuickRateFrame:Show();
							end,
						},
						{ 
							"Options",
							L["View PlayerScore options."],
							function(...)
								TenTonHammer:Show();
								TenTonHammer:SwitchTabs(6)
							end,
						},
						{
							"Bonus",
							L["View additional PlayerScore resources."],
							function(...)
								TenTonHammer:Show();
								TenTonHammer:SwitchTabs(7);
							end,
						},
					}
					for i = 1,#ButtonArray do
						local Button = CreateFrame("Button", Name.."_MainButton"..i, TenTonHammer_ControlFrame, "TenTonHammer_Button");
						Button:SetText(ButtonArray[i][1]);
						Button:SetWidth(150);
						Button:SetPoint("TOPLEFT", TenTonHammer_ControlFrame, 25, 10 - 31 * i);
						Button.Hyperlink = ButtonArray[i][2] or "";
						Button:SetScript("OnClick", ButtonArray[i][3] or nil);
					end;
					
				]]>
			</OnLoad>
			<OnMouseUp>
				<![CDATA[
					if ( button =="LeftButton" ) then
						TenTonHammer:Scan("target");
					end;
					if ( button == "RightButton" ) then
						if ( TenTonHammer_ControlFrame:IsVisible() ) then
							TenTonHammer_ControlFrame:Hide();
							TenTonHammer_Settings["collapse"] = 1;
						else
							TenTonHammer_ControlFrame:Show();
							TenTonHammer_Settings["collapse"] = 0;
						end;
						self:Tooltip();
					end;
				]]>
			</OnMouseUp>
			<OnEnter>
				<![CDATA[
					self:Tooltip();
				]]>
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide();
			</OnLeave>
		</Scripts>
		<Size>
			<AbsDimension x="64" y="64"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER" relativeTo="UIParent">
				<Offset x="200" y="0" />
			</Anchor>
		</Anchors>
		<Backdrop bgFile ="Interface\AddOns\GearScore\UI\logo-small" tile="false">
			<TileSize>
				<AbsValue value="32"></AbsValue>
			</TileSize>
			<EdgeSize>
				<AbsValue value="32"></AbsValue>
			</EdgeSize>
		</Backdrop>
		<Frames>
			<Frame name="TenTonHammer_ControlFrame" hidden="false" >
				<Scripts>

				</Scripts>
				<Size>
					<AbsDimension x="200" y="280"/>
				</Size>
				<Anchors>
					<Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPLEFT">
						<Offset x="0" y="0" />
					</Anchor>
				</Anchors>
				<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="false">
					<BackgroundInsets>
						<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
					</BackgroundInsets>
					<TileSize>
						<AbsValue value="32"></AbsValue>
					</TileSize>
					<EdgeSize>
						<AbsValue value="32"></AbsValue>
					</EdgeSize>
				</Backdrop>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture name="$parent_MainTexture">
							<Anchors>
								<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
									<Offset x="10" y="-10"></Offset>
								</Anchor>
								<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
									<Offset x="-10" y="10"></Offset>
								</Anchor>
							</Anchors>
							<Color r="0" g="0" b="0" a="1.0"></Color>
						</Texture>
					</Layer>
				</Layers>
			</Frame>		
		</Frames>
	</Frame>
	<Frame name="TTH_InspectPVPFrame" enableMouse="true" parent="TenTonHammer_Frame5" hidden="false" useParentLevel="true" setAllPoints="true" id="2">
		<Backdrop edgeFile="Interface\Addons\GearScore\UI\new-border" tile="false">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"></AbsInset>
			</BackgroundInsets>
			<TileSize>
				<AbsValue value="32"></AbsValue>
			</TileSize>
			<EdgeSize>
				<AbsValue value="32"></AbsValue>
			</EdgeSize>
		</Backdrop>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parentBG" file="Interface\PVPFrame\PVP-Conquest-Misc">
					<Size x="319" y="118"/>
					<TexCoords left="0.00097656" right="0.31445313" top="0.33789063" bottom="0.56835938"/>
					<Anchors>
						<Anchor point="TOPLEFT" x="8" y="-64"/>
					</Anchors>
				</Texture>
			</Layer>
			<Layer level="BORDER">
				<Texture name="$parentBottom" file="Interface\Common\ShadowOverlay-Bottom">
					<Size x="319" y="8"/>
					<Anchors>
						<Anchor point="BOTTOM" relativeTo="$parentBG"/>
					</Anchors>
				</Texture>
				<Texture name="$parentFaction" file="Interface\PVPFrame\PVP-Conquest-Misc">
					<Size x="55" y="66"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentBG" x="6" y="0"/>
					</Anchors>
					<TexCoords left="0.63867188" right="0.69238281" top="0.60351563" bottom="0.73242188"/>
				</Texture>
				<Texture name="$parentDivider" file="Interface\FriendsFrame\UI-FriendsFrame-OnlineDivider">
					<Size x="270" y="0"/>
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentBG" x="40" y="0"/>
					</Anchors>
					<Color r="1" g="1" b="0" a="1"/>
				</Texture>
				<FontString name="$parentRatedBattlegroundsLabel" inherits="GameFontNormalLarge" text="PVP_RATED_BATTLEGROUNDS">
					<Anchors>
						<Anchor point="BOTTOMLEFT" relativeTo="$parentDivider" relativePoint="TOPLEFT">
							<Offset>
								<AbsDimension x="24" y="-4"/>
							</Offset>
						</Anchor>
					</Anchors>
					<Color r="1" g="1" b="1"/>
				</FontString>
				<FontString name="$parentRatingLabel" inherits="GameFontNormal" text="PVP_RATING">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentRatedBattlegroundsLabel" relativePoint="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="8" y="-8"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentRating" inherits="GameFontHighlight" text="0">
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRatingLabel" relativePoint="RIGHT">
							<Offset>
								<AbsDimension x="4" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentRecordLabel" inherits="GameFontNormal" text="PVP_RECORD">
					<Anchors>
						<Anchor point="TOPLEFT" relativeTo="$parentRatedBattlegroundsLabel" relativePoint="BOTTOMLEFT">
							<Offset>
								<AbsDimension x="110" y="-8"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentRecord" inherits="GameFontHighlight" text="0">
					<Anchors>
						<Anchor point="LEFT" relativeTo="$parentRecordLabel" relativePoint="RIGHT">
							<Offset>
								<AbsDimension x="4" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<!-- Arena Teams -->
			<Frame name="TTH_InspectPVPTeam1Standard" inherits="PVPTeamStandardTemplate">
				<Anchors>
					<Anchor point="LEFT">
						<Offset>
							<AbsDimension x="14" y="-8"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Button name="TTH_InspectPVPTeam1" inherits="PVPTeamBorderTemplate" id="1">
				<Anchors>
					<Anchor point="LEFT" relativeTo="TTH_InspectPVPTeam1Standard">
						<Offset>
							<AbsDimension x="33" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentTeamType" inherits="GameFontDisableLarge" hidden="true">
							<Anchors>
								<Anchor point="CENTER">
									<Offset>
										<AbsDimension x="-8" y="0"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="$parentData" inherits="PVPTeamDataTemplate" hidden="true">
						<Size>
							<AbsDimension x="280" y="70"/>
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT"/>
						</Anchors>
					</Frame>
				</Frames>
			</Button>
			<Frame name="TTH_InspectPVPTeam2Standard" inherits="PVPTeamStandardTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="TTH_InspectPVPTeam1Standard" relativePoint="BOTTOMLEFT" x="0" y="-14"/>
				</Anchors>
			</Frame>
			<Button name="TTH_InspectPVPTeam2" inherits="PVPTeamBorderTemplate" id="2">
				<Anchors>
					<Anchor point="LEFT" relativeTo="TTH_InspectPVPTeam2Standard">
						<Offset>
							<AbsDimension x="33" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentTeamType" inherits="GameFontDisableLarge" hidden="true">
							<Anchors>
								<Anchor point="CENTER">
									<Offset>
										<AbsDimension x="-8" y="0"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="$parentData" inherits="PVPTeamDataTemplate" hidden="true">
						<Size>
							<AbsDimension x="280" y="70"/>
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT"/>
						</Anchors>
					</Frame>
				</Frames>
			</Button>
			<Frame name="TTH_InspectPVPTeam3Standard" inherits="PVPTeamStandardTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="TTH_InspectPVPTeam2Standard" relativePoint="BOTTOMLEFT" x="0" y="-14"/>
				</Anchors>
			</Frame>
			<Button name="TTH_InspectPVPTeam3" inherits="PVPTeamBorderTemplate" id="3">
				<Anchors>
					<Anchor point="LEFT" relativeTo="TTH_InspectPVPTeam3Standard">
						<Offset>
							<AbsDimension x="33" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<FontString name="$parentTeamType" inherits="GameFontDisableLarge" hidden="true">
							<Anchors>
								<Anchor point="CENTER">
									<Offset>
										<AbsDimension x="-8" y="0"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Frames>
					<Frame name="$parentData" inherits="PVPTeamDataTemplate" hidden="true">
						<Size>
							<AbsDimension x="280" y="70"/>
						</Size>
						<Anchors>
							<Anchor point="TOPLEFT"/>
						</Anchors>
					</Frame>
				</Frames>
			</Button>
			<Frame name="$parentNoTeamsFrame" inherits="GlowBoxTemplate"  parentKey="noTeams" hidden="true" enableMouse="true">
				<Anchors>
					<Anchor point="TOPLEFT" x="0" y="0" relativePoint="TOPLEFT"  relativeTo="TTH_InspectPVPTeam1Standard"/>
					<Anchor point="BOTTOMRIGHT" x="-24" y="0" relativePoint="BOTTOMRIGHT"  relativeTo="TTH_InspectPVPTeam3"/>
				</Anchors>
				<Layers>
					<Layer level="OVERLAY">
						<FontString name="$parentTitle" inherits="QuestTitleFontBlackShadow" text="ARENA_TEAMS"  justifyH="CENTER">
							<Anchors>
								<Anchor point="TOP" x="0" y="-20"/>
							</Anchors>
						</FontString>
						<FontString inherits="GameFontRed" text="ARENA_TEAMS_INVALID_WARNING"  justifyH="CENTER">
							<Size x="280" y="0"/>
							<Anchors>
								<Anchor point="TOP"  relativeTo="$parentTitle" relativePoint="BOTTOM" x="0" y="-6"/>
							</Anchors>
						</FontString>
						<FontString name="$parentInfo"  inherits="GameFontHighlight" text="ARENA_INFO"  justifyH="LEFT">
							<Size x="280" y="0"/>
							<Anchors>
								<Anchor point="TOPLEFT"  x="20" y="-95"/>
							</Anchors>
						</FontString>
						<FontString inherits="GameFontNormal" text="ARENA_CREATE_INFO"  justifyH="LEFT">
							<Size x="280" y="0"/>
							<Anchors>
								<Anchor point="TOPLEFT"  relativeTo="$parentInfo" relativePoint="BOTTOMLEFT" x="0" y="-15"/>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
		</Frames>
		<Scripts>
			<OnLoad>
				<![CDATA[
					self:RegisterEvent("INSPECT_HONOR_UPDATE");
					TTH_InspectPVPFrame:SetPoint("TOPLEFT", TenTonHammer_Frame5, "TOPLEFT", 10, 45);
					TTH_InspectPVPTeam1Standard:SetPoint("LEFT", 14,45);
					
					function TTH_InspectPVPFrame_SetFaction()
						local factionGroup = UnitFactionGroup("target");
						if ( factionGroup == "Alliance" ) then
							TTH_InspectPVPFrameFaction:SetTexCoord(0.69433594, 0.74804688, 0.60351563, 0.72851563);
						else
							TTH_InspectPVPFrameFaction:SetTexCoord(0.63867188, 0.69238281, 0.60351563, 0.73242188);
						end
					end
					
					function TTH_InspectPVPFrame_Update()
						for i=1, MAX_ARENA_TEAMS do
							GetInspectArenaTeamData(i);
						end	
						TTH_InspectPVPFrame_SetFaction();
						TTH_InspectPVPTeam_Update();
					end

					function TTH_InspectPVPTeam_Update()
						-- Display Elements
						local button, buttonName, highlight, data, standard, emblem, border;
						-- Data Elements
						local teamName, teamSize, teamRating, teamPlayed, teamWins, teamLoss, playerPlayed,  playerRating, playerPlayedPct, teamRank;
						local background = {};
						local borderColor = {};
						local emblemColor = {};
						local ARENA_TEAMS = {};
						local teamCount = 0;
						ARENA_TEAMS[1] = {size = 2};
						ARENA_TEAMS[2] = {size = 3};
						ARENA_TEAMS[3] = {size = 5};

						-- Sort teams by size

						local buttonIndex = 0;
						for index, value in pairs(ARENA_TEAMS) do
							for i=1, MAX_ARENA_TEAMS do
								teamName, teamSize = GetInspectArenaTeamData(i);
								if ( value.size == teamSize ) then
									value.index = i;
								end
							end
						end

						-- fill out data
						for index, value in pairs(ARENA_TEAMS) do
							if ( value.index ) then
								teamCount = teamCount + 1;
								buttonIndex = buttonIndex + 1;
								-- Pull Values
								teamName, teamSize, teamRating, teamPlayed, teamWins,  playerPlayed, playerRating, background.r, background.g, background.b, emblem, emblemColor.r, emblemColor.g, emblemColor.b, border, borderColor.r, borderColor.g, borderColor.b = GetInspectArenaTeamData(value.index);
								teamLoss = teamPlayed - teamWins;
								if ( teamPlayed ~= 0 ) then
									playerPlayedPct =  floor( ( playerPlayed / teamPlayed ) * 100 );		
								else
									playerPlayedPct =  floor( ( playerPlayed / 1 ) * 100 );
								end

								-- Set button elements to variables 
								button = _G["TTH_InspectPVPTeam"..buttonIndex];
								buttonName = "TTH_InspectPVPTeam"..buttonIndex;
								data = buttonName.."Data";
								standard = buttonName.."Standard";

								button:SetID(value.index);

								-- Populate Data
								_G[data.."TypeLabel"]:SetText(ARENA_THIS_SEASON);
								_G[data.."Name"]:SetText(teamName);
								_G[data.."Rating"]:SetText(teamRating);
								_G[data.."Games"]:SetText(teamPlayed);
								_G[data.."Wins"]:SetText(teamWins);
								_G[data.."Loss"]:SetText(teamLoss);

								_G[data.."Played"]:SetText(playerRating);
								_G[data.."Played"]:SetVertexColor(1.0, 1.0, 1.0);
								_G[data.."PlayedLabel"]:SetText(RATING);

								-- Set TeamSize Banner
								_G[standard.."Banner"]:SetTexture("Interface\\PVPFrame\\PVP-Banner-"..teamSize);
								_G[standard.."Banner"]:SetVertexColor(background.r, background.g, background.b);
								_G[standard.."Border"]:SetVertexColor(borderColor.r, borderColor.g, borderColor.b);
								_G[standard.."Emblem"]:SetVertexColor(emblemColor.r, emblemColor.g, emblemColor.b);
								if ( border ~= -1 ) then
									_G[standard.."Border"]:SetTexture("Interface\\PVPFrame\\PVP-Banner-"..teamSize.."-Border-"..border);
								end
								if ( emblem ~= -1 ) then
									_G[standard.."Emblem"]:SetTexture("Interface\\PVPFrame\\Icons\\PVP-Banner-Emblem-"..emblem);
								end

								-- Set visual elements
								_G[data]:Show();
								button:SetAlpha(1);
								_G[buttonName.."Highlight"]:SetAlpha(1);
								_G[buttonName.."Highlight"]:SetBackdropBorderColor(1.0, 0.82, 0);
								_G[standard]:SetAlpha(1);
								_G[standard.."Border"]:Show();
								_G[standard.."Emblem"]:Show();
								_G[buttonName.."Background"]:SetVertexColor(0, 0, 0);
								_G[buttonName.."Background"]:SetAlpha(1);
								_G[buttonName.."TeamType"]:Hide();
							end
						end

						-- show unused teams
						for index, value in pairs(ARENA_TEAMS) do
							if ( not value.index ) then
								-- Set button elements to variables 
								buttonIndex = buttonIndex + 1;
								button = _G["TTH_InspectPVPTeam"..buttonIndex];
								buttonName = "TTH_InspectPVPTeam"..buttonIndex;
								data = buttonName.."Data";

								-- Set standard type
								_G[buttonName.."StandardBanner"]:SetTexture("Interface\\PVPFrame\\PVP-Banner-"..value.size);

								-- Hide or Show items
								button:SetAlpha(0.4);
								_G[data]:Hide();
								_G[buttonName.."Background"]:SetVertexColor(0, 0, 0);
								_G[buttonName.."Standard"]:SetAlpha(0.1);
								_G[buttonName.."StandardBanner"]:SetVertexColor(1, 1, 1);
								_G[buttonName.."StandardBorder"]:Hide();
								_G[buttonName.."StandardEmblem"]:Hide();
								_G[buttonName.."TeamType"]:SetFormattedText(PVP_TEAMSIZE, value.size, value.size);
								_G[buttonName.."TeamType"]:Show();
							end
						end
						if ( teamCount < 1 ) then
							--TTH_InspectPVPFrameNoTeamsFrame:Show();
						else
							TTH_InspectPVPFrameNoTeamsFrame:Hide();
						end;
					end
				]]>
			</OnLoad>
			<OnEvent>
				if ( event == "INSPECT_HONOR_UPDATE" ) then
					TTH_InspectPVPFrame_Update();
				end
			</OnEvent>
			<OnShow>
				--ButtonFrameTemplate_HideButtonBar(InspectFrame);
				TTH_InspectPVPFrame_Update();
				if ( not HasInspectHonorData() ) then
					RequestInspectHonorData();
				else
					TTH_InspectPVPFrame_Update();
				end
			</OnShow>
		</Scripts>
	</Frame>
	<Button name="TenTonHammer_MinimapButton" parent="Minimap" toplevel="true" movable="true" hidden="false">
		<Size>
			<AbsDimension x="33" y="33"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER" relativeTo="Minimap" relativePoint="RIGHT">
				<Offset>
					<AbsDimension x="5" y="0"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				<![CDATA[
				self:RegisterForClicks("LeftButtonDown", "RightButtonDown");
				self:RegisterForDrag("MiddleButton")

				function self:UpdateMinimapIconCoords()
					-- Thanks to Gello from http://www.wowinterface.com/forums/showthread.php?t=2762
					local xPos, yPos = GetCursorPosition();
					local left, bottom = Minimap:GetLeft(), Minimap:GetBottom();
					xPos = left - xPos/UIParent:GetScale() + 70;
					yPos = yPos/UIParent:GetScale() - bottom - 70;
					local angle = math.deg(math.atan2(yPos, xPos));
					if(angle < 0) then
						angle = angle + 360;
					end
	
					--addon:SetOption("MinimapIconAngle", iconAngle)
					--AltoholicGeneralOptions_SliderAngle:SetValue(iconAngle)
					--local radius = addon:GetOption("MinimapIconRadius");
					--local angle = addon:GetOption("MinimapIconAngle")
					local radius = Minimap:GetWidth() / 2 + 10;
					
					self:SetPoint( "TOPLEFT", "Minimap", "TOPLEFT", 54 - (radius * cos(angle)), (radius * sin(angle)) - 55 );
				end
				]]>			
			</OnLoad>
			<OnClick>
				if ( button == "RightButton" ) then
				ToggleDropDownMenu(1, nil, TenTonHammer_MinimapButton_DropDown, self:GetName(), 0, 0);
				end;
				if ( button == "LeftButton" ) then
				if ( UnitIsPlayer("target") ) then TenTonHammer:Scan("target") else TenTonHammer:Scan("player"); end;
				end;
			</OnClick>
			<OnUpdate>
				if ( self.moving ) then
					self:UpdateMinimapIconCoords();
				end;
			</OnUpdate>
			<OnDragStart>
					self:StartMoving();
					self.moving = true;
			</OnDragStart>
			<OnDragStop>
				self.moving = false;
				self:StopMovingOrSizing();
				self:UpdateMinimapIconCoords()
			</OnDragStop>
			<OnEnter>
				GameTooltip:SetOwner(self, "ANCHOR_Right");
				GameTooltip:AddLine("PlayerScore");
				GameTooltip:AddLine("|cffFFFFFFLeft-Click to scan your target.");
				GameTooltip:AddLine("|cffFFFFFFRight-Click for options.");
				GameTooltip:AddLine("|cffFFFFFFMiddle-Click to move.");
				GameTooltip:Show();
			</OnEnter>
			GameTooltip:Hide();
			<OnLeave>
			</OnLeave>
		</Scripts>
		<Frames>
			<Frame name="$parent_DropDown" inherits="UIDropDownMenuTemplate" frameStrata="FULLSCREEN_DIALOG">
				<Scripts>
					<OnLoad>
						<![CDATA[
							local AceLocale = LibStub("AceLocale-3.0");
							local L = AceLocale:GetLocale("GearScore4");
						
							function self:showTab(tab)
								TenTonHammer:Show();
								--if ( tab == 9 ) then tab = 7; end;
								TenTonHammer:SwitchTabs(tab);
							end;
							
							function self:SwitchOption(option)
								 if ( TenTonHammer_Settings ) and ( option ) then
									TenTonHammer_Settings[option] = not TenTonHammer_Settings[option];
								 end;
							end;
						
							someSetting = false;
						
							function self:SetButtons()
								self.buttons = {
									[1] = {
										{
											text = "PlayerScore",
											isTitle = 1,
											notCheckable = 1,
											justifyH = "CENTER",
											textHeight = 24,
										},
										{
											text = "Online Lookup",
											notCheckable = 0,
											hasArrow = 1,
											value = "OnlineLookup",
										},
										{
											text = "My Profile",
											func = TenTonHammer.Scan,
											arg1 = "player",
											notCheckable = 1,
										},
										{
											text = "My Online Profile",
											func = function(...)
												local PlayerName, PlayerRealm = UnitName("player");
												PlayerRealm = PlayerRealm or GetRealmName();
												local url = "http://www.playerscore.com/character/"..PlayerName.."/"..PlayerRealm.."/"..TenTonHammer.Region;
												TenTonHammer_PopupFrame:Popup(url);
											end,
											notCheckable = 1,
										},
										{
											text = "Scan Target",
											func = TenTonHammer.Scan,
											arg1 = "target",
											notCheckable = 1,
										},
										{
											text = "View Database",
											func = self.showTab,
											arg1 = 8,
											notCheckable = 1,
										}, 
										{
											text = "Scan Group",
											func = TenTonHammer.ScanEntireParty,
											notCheckable = 1,
										},
										{
											text = "Rate Group",
											func = function(...) TenTonHammer_QuickRateFrame:Show(); end,
											notCheckable = 1,
										},
										{
											text = "Options",
											func = self.showTab,
											arg1 = 6,
											notCheckable = 1,
											--hasArrow = 1,
											value = "optionsMenu",
										},
										{
											text = "Bonus",
											func = self.showTab,
											arg1 = 9,
											notCheckable = 1,
										},
										{
											text = "Character Claim",
											func = function(...)
												self:showTab(7);
												local f = TenTonHammer;
												local q = f.Help["Questions"][9] or "";
												print(q);
												_G["TenTonHammer_Frame7_AnswerTitle"]:SetText(" - "..q.." - ");
												_G["TenTonHammer_Frame7_AnswerTitle"]:Center();
												_G["TenTonHammer_Frame7_Answer"]:SetText(f.Help["Answers"][q]);
											end,
											notCheckable = 1,
										},
										
									},
									[2] = {
										["optionsMenu"] = {
											{
												text = "Options Menu",
												isTitle = 1,
												notCheckable = 1,
												justifyH = "CENTER",
												textHeight = 24,
											},
											{
												text = "View All Options",
												func = self.showTab,
												arg1 = 6,
												notCheckable = 1,
											},
											{
												text = "Tooltip Options",
												hasArrow = 1,
												value = "tooltipOptions",
												notCheckable = 1,
											},
										},
									},
									[3] = {
										["tooltipOptions"] = {
											{
												--text = L["Show Raid Score"],
												keepShownOnClick = 1,
												--checked = TenTonHammer_Settings["raidOnTip"],
												checked = GetSomeSetting(),
												--func = self.SwitchOption,
												func = function (...) someSetting = not someSetting; print("SomeSetting is", someSetting); end,
												arg1 = "raidOnTip",
											},
											{
												--text = L["Show PVE Score"],
												keepShownOnClick = 1,
												--checked = TenTonHammer_Settings["pveOnTip"],
												func = self.SwitchOption,
												arg1 = "pveOnTip",
											},
										},
									},
								};
						end;
						
						function GetSomeSetting(arg1)
							return someSetting;
						end;
						
						function self:Initialize(level)
					
							level = level or 1;
							local info = self.buttons[level];
							
							if ( level == 2 ) then
								info = TenTonHammer:ContextMenu();
							end;
							
							if ( level > 1 ) and ( UIDROPDOWNMENU_MENU_VALUE ) then
								if ( info[UIDROPDOWNMENU_MENU_VALUE] ) then
									info = info[UIDROPDOWNMENU_MENU_VALUE];
								end;
							end;
							
							for i,v in ipairs(info) do
								UIDropDownMenu_AddButton(v, level);
							end;
						end;

						--UIDropDownMenu_Initialize(self, self.Initialize);
						--UIDropDownMenu_Initialize(self, 2);
						]]>
					</OnLoad>
				</Scripts>
			</Frame>
		</Frames>
		<Layers>
			<Layer level="ARTWORK">
				<Texture name="$parentIcon" file="Interface\Addons\GearScore\UI\logo-small">
					<Size>
						<AbsDimension x="21" y="21"/>
					</Size>
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="7" y="-6"/>
							</Offset>
						</Anchor>
					</Anchors>
					<TexCoords left="0.075" right="0.925" top="0.075" bottom="0.925"/>
				</Texture>
			</Layer>
			<Layer level="OVERLAY">
				<Texture file="Interface\Minimap\MiniMap-TrackingBorder">
					<Size>
						<AbsDimension x="56" y="56"/>
					</Size>
					<Anchors>
						<Anchor point="TOPLEFT"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<HighlightTexture alphaMode="ADD" file="Interface\Minimap\UI-Minimap-ZoomButton-Highlight"/>
	</Button>

	<Frame name="TenTonHammer_QuickRateFrame" hidden="true" parent="UIParent" clampedToScreen="true" enableMouse="true" movable="true" resizable="false">
		<Size>
			<AbsDimension x="300" y="460" />
		</Size>
		<Anchors>
			<Anchor point="CENTER">
				<Offset x="0" y="0" />
			</Anchor>
		</Anchors>
		<Scripts>
			<OnShow>
				<![CDATA[
					--_G[self:GetParent():GetName().."_MainButton5"]:Show();
					--_G[self:GetParent():GetName().."_MainButton3"]:Hide();
					local name = self:GetName();
					local f = TenTonHammer;
					local height = 100;
					
					-- Real Setup
					local loopCount = 0;
					for i = 2,26 do 
						_G[name.."_Data"..i]:SetText();
					end;
					for i,v in pairs(f.PartyData) do
						if ( loopCount < 26 ) and ( i ~= UnitName("player") ) then
							loopCount = loopCount + 1;	
							if ( f.PartyData ) and ( f.PartyData[i] ) then
								local p = f.PartyData[i];
								--_G[name.."_Data"..loopCount+1]:SetText(p["Color"]..i, "", f:GetQuickColor(p["GearScore"]), "", "", "", p["ThumbsUp"], p["ThumbsDown"], p["Vote"], p["Negative"], p["Positive"]);
								_G[name.."_Data"..loopCount+1]:SetText(p["Color"]..i, p["Color"]..p["Spec"].." "..p["ClassLocal"], f:GetQuickColor(p["GearScore"]), f:GetQuickColor(p["RaidScore"]), f:GetQuickColor(p["PVEScore"]), f:GetQuickColor(p["PVPScore"]), p["ThumbsUp"], p["ThumbsDown"], p["Vote"], p["Negative"], p["Positive"]);
								_G[name.."_Data"..loopCount+1].Player = i;
								_G[name.."_Data"..loopCount+1].Realm = p["Realm"];
							end;
						end;
					end;
					self:SetHeight(height + loopCount * 15);
					if ( loopCount == 0 ) then
						self:Hide();
						print("There are no party members to rate...");
					end;
					]]>
			</OnShow>
			<OnLoad>
				<![CDATA[
				
					-- Allows Users to move the main frame by dragging the title box.
					self:EnableMouse(true);
					self:SetMovable(true);
					self:RegisterForDrag("LeftButton");
					self:SetScript("OnDragStart", function() self:StartMoving() end);
					self:SetScript("OnDragStop", function() self:StopMovingOrSizing() end);
				
					local name = self:GetName();
						
					local header = CreateFrame("Frame", name.."_HeaderText", self, "TenTonHammer_Info");
					header:SetPoint("TOPLEFT", self, 0, -20);
					header:SetText("Quickly Rate Your Party");
					header:SetWidth(300);
					header:Center();
					header:SetColor(1,1,1,1);
					
					local footer = CreateFrame("Frame", name.."_FooterText", self, "TenTonHammer_Info");
					footer:SetPoint("BOTTOMLEFT", self, 0, 25);
					footer:SetText("Download the PlayerScore updater from \nPlayerScore.com to share your ratings.");
					footer:Center();
					footer:SetColor(1,1,1,1);
					footer:SetWidth(300);
						
					for i = 2,26 do
						local Text = CreateFrame("Frame", name.."_Data"..i, self, "TenTonHammer_DatabaseEntry2")
						Text:SetPoint("TOPLEFT", self, 20, (i + 1) * -15 - 5);
						if ( i == 1 ) then
							Text:SetText("Name", "Class & Spec", "GearScore", "Raid", "PvE", "PvP", nil, nil, nil);
							_G[name.."_Data1_Text_Name"]:SetJustifyH("CENTER");
						end;
						--Text:SetText("asdfasdf", "64");
						--Text:SetColor(0,1,0,1);
					end;
				]]>
			</OnLoad>
		</Scripts>
		<Frames>
			<Button name="$parent_ExitButton" inherits="UIPanelCloseButton">
				<Anchors>
					<Anchor point="CENTER" relativeTo="$parent" relativePoint="TOPRIGHT">
						<Offset>
							<AbsDimension x="-20" y="-20"></AbsDimension>
						</Offset>
					</Anchor>
				</Anchors>
			</Button>
		</Frames>
		<Layers>
			<Layer level="BACKGROUND">
				<Texture name="$parent_MainTexture">
					<Anchors>
						<Anchor point="TOPLEFT" relativePoint="TOPLEFT" relativeTo="$parent">
							<Offset x="10" y="-10"></Offset>
						</Anchor>
						<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT" relativeTo="$parent">
							<Offset x="-10" y="10"></Offset>
						</Anchor>
					</Anchors>
					<Color r="0" g="0" b="0" a="1.0"></Color>
				</Texture>
			</Layer>
		</Layers>
	</Frame>
</Ui>

